"use strict";(self.webpackChunkmy_app=self.webpackChunkmy_app||[]).push([[708],{2708:function(e,s,a){a.r(s),a.d(s,{default:function(){return Ze}});var n=a(1413),t=a(2791),d=a(8687),r=a(5870),i="dialog2Messages2COM_dialog2Messages2Common__yrugD",o=a(9439),c="dialog2Render_Fixed__yAlTJ",l="dialog2Render_dialog2ListCommon__ZMqFo",m="dialog2Render_MobileDialogWidth__ahAt-",g="dialog2Render_DesktopDialogWidth__zSxVR",u="dialog2Render_Dialog2ItemCardExt__LODJo",_="dialog2Render_Dialog2ItemCardInt__HQqPI",h="dialog2Render_Dialog2ItemCardName__zSixE",v="dialog2Render_Dialog2ItemCardPhoto__jPmgw",M="dialog2Render_Dialog2ItemCardNewMsgCnt__TrWvv",x="dialog2Render_Dialog2ItemCardMsgTime__2bCd+",f="dialog2Render_dialog2HeaderCommon__YO-4Y",j="dialog2Render_Dialog2SearchInput__uF7Sy",p="dialog2Render_MagnifyingGlass__VpERP",N=a(6110),D=a(1087),I=function(e){var s,a=new Date(e?new Date(e).getTime()+108e5:0),n=!!e&&(new Date).getFullYear()===a.getFullYear()&&(new Date).getMonth()===a.getMonth()&&(new Date).getDate()===a.getDate(),t=("0"+a.getFullYear()).substr(-4),d=a.getMonth(),r=("0"+a.getDate()).substr(-2),i=("0"+a.getHours()).substr(-2),o=("0"+a.getMinutes()).substr(-2),c=("0"+a.getSeconds()).substr(-2);switch(d){case 0:s="01";break;case 1:s="02";break;case 2:s="03";break;case 3:s="04";break;case 4:s="05";break;case 5:s="06";break;case 6:s="07";break;case 7:s="08";break;case 8:s="09";break;case 9:s="10";break;case 10:s="11";break;case 11:s="12";break;default:s=""}return{Year:t,Month:s,Day:r,Hour:i,Minutes:o,Seconds:c,isToday:n}},y=a(184),R=(0,t.memo)((function(e){var s=e.userName,a=e.hasNewMessages,n=e.photosSmall,t=e.lastDialogActivityDate,d=e.newMessagesCount,r=e.id;console.log("Dialog2Item");var i=I(t);return(0,y.jsx)("div",{className:u,children:(0,y.jsx)(D.OL,{to:"/messages/"+r,children:(0,y.jsxs)("div",{className:_,children:[(0,y.jsx)("div",{className:h,children:s}),"   ",a&&(0,y.jsx)("div",{className:M,children:d})," ",(0,y.jsx)("img",{src:n||N,className:v,alt:"CardPhoto"})," ",(0,y.jsx)("div",{className:x,children:i.isToday?(0,y.jsxs)("span",{children:[" ",i.Hour,":",i.Minutes]}):(0,y.jsxs)("span",{children:[" ",i.Day," ",i.Month," ",i.Year]})})]})})})}));var b=a.p+"static/media/magnifying-glass.3e5e2c21301cb96ebac59d5c181f8886.svg",S=(0,t.memo)((function(e){var s=e.SearchValue,a=e.setSearchValue;return console.log("\u043e\u0442\u0440\u0438\u0441\u043e\u0432\u043a\u0430 \u043f\u043e\u043b\u044f \u043f\u043e\u0438\u0441\u043a\u0430 \u0441\u0440\u0435\u0434\u0438 dialogs2"),(0,y.jsxs)("div",{children:[(0,y.jsx)("input",{placeholder:"\u041f\u043e\u0438\u0441\u043a",value:s,onChange:function(e){return a(e.target.value)},type:"text",className:j}),(0,y.jsx)("img",{src:b,className:p,alt:"\u041f\u043e\u0438\u0441\u043a"})]})})),w=function(e){var s=e.pageWidth,a=e.mobileWidth,n=e.patch,d=e.Dialog2All,r=(0,t.useState)(""),i=(0,o.Z)(r,2),u=i[0],_=i[1],h=d&&d.filter((function(e){return e.userName.toLowerCase().includes(u.toLowerCase())}));return(0,y.jsx)("div",{children:("messages"===n&&s>a||"dialog2"===n)&&(0,y.jsxs)("div",{children:[(0,y.jsx)("div",{className:"".concat(c," ").concat(f," ").concat(s<a?m:g),children:(0,y.jsx)(S,{SearchValue:u,setSearchValue:_})}),(0,y.jsx)("div",{className:"".concat(c," ").concat(l," ").concat(s<a?m:g),children:h.map((function(e){var s=e.id,a=e.userName,n=e.hasNewMessages,t=e.lastDialogActivityDate,d=e.newMessagesCount,r=e.photos.small;return(0,y.jsx)(R,{userName:a,hasNewMessages:n,photosSmall:r,lastDialogActivityDate:t,newMessagesCount:d,id:s},s)}))})]})})},C=t.memo(w),k="messages2Render_Fixed__baHQ8",A="messages2Render_messages2NameAndProfileLink__gsVN6",Z="messages2Render_messages2ChooseDialog__JKbif",T="messages2Render_messages2RenderMessages__Ebe0U",W="messages2Render_messages2PrintMessage__dhozP",H="messages2Render_MobileMessagesLeft__6JOQ+",P="messages2Render_DesktopMessagesLeft__rsM5T",F="messages2Render_Msg2HeaderName__Mw++x",E="messages2Render_Msg2HeaderPhoto__XGI9W",L="messages2Render_Msg2HeaderActivityDate__ZWTOr",Y="messages2Render_myIdNotMyIdMsg2ComExt__oPyxL",O="messages2Render_myIdMessageExt__41EAp",V="messages2Render_NOTmyIdMessageExt__5fs33",B="messages2Render_myIdNotMyIdMsg2ComInt__Estd7",U="messages2Render_myIdMessageInt__xSaFZ",z="messages2Render_NOTmyIdMessageInt__hPt2K",q="messages2Render_Msg2DropDownMenuExt__az4N7",J="messages2Render_Msg2DropDownMenuIntCommon__vMw3j",K="messages2Render_Msg2DropDownMenuIntMy__6FgWz",Q="messages2Render_Msg2DropDownMenuIntNotMy__Yf+sf",G="messages2Render_Msg2DropDownItems__Qu0q7",X="messages2Render_positionRelative__ovQvp",$="messages2Render_DropdownItem__AtL0R",ee="messages2Render_imgDelete__qGmmU",se="messages2Render_imgSpam__tMesr",ae="messages2Render_imgRestore__YIG+H",ne="messages2Render_Msg2ItemAdedAtCommon__JW5T8",te="messages2Render_ColorMy__HqHhB",de="messages2Render_ColorNotMy__X-mAo",re="messages2Render_Msg2DeletedText__lBh9V",ie="messages2Render_Msg2DeletedPic__V5oiT",oe="messages2Render_Msg2SpamPic__wTzWN",ce="messages2Render_Msg2Body__dWvTp",le="messages2Render_Msg2DateExt__3e0xK",me="messages2Render_Msg2DateInt__G4Q4g",ge=a(8789);var ue=a.p+"static/media/dust-bin2.9f266211d62f71a82d41f9c57beb3d28.svg";var _e=a.p+"static/media/spam1.c38e496626cdf8fb2aae68cddb1227de.svg";var he=a.p+"static/media/restore1.1c96ab0dd3d42ca07131c5eb6a164a47.svg",ve=(0,t.memo)((function(e){var s=e.id,a=e.isMyMessage,n=e.deletedBySender,t=e.isSpam,i=(0,d.I0)();return(0,y.jsx)(y.Fragment,{children:(0,y.jsx)("div",{children:(0,y.jsxs)(ge.Z,{children:[(0,y.jsx)(ge.Z.Toggle,{className:"".concat(a?K:Q," \n                         ").concat(J)}),(0,y.jsxs)(ge.Z.Menu,{className:G,children:[!n&&(0,y.jsxs)(ge.Z.Item,{className:X,eventKey:"1",onClick:function(){i((0,r.fv)(s))},children:[(0,y.jsx)("div",{className:$,children:"\u0423\u0434\u0430\u043b\u0438\u0442\u044c \u0443 \u043c\u0435\u043d\u044f"}),(0,y.jsx)("img",{src:ue,className:ee,alt:"\u0423\u0434\u0430\u043b\u0438\u0442\u044c \u0443 \u043c\u0435\u043d\u044f"})]}),!a&&!t&&(0,y.jsxs)(ge.Z.Item,{className:X,eventKey:"2",onClick:function(){i((0,r.ho)(s))},children:[(0,y.jsx)("div",{className:$,children:"\u0412 \u0441\u043f\u0430\u043c"}),(0,y.jsx)("img",{src:_e,className:se,alt:"\u0412 \u0441\u043f\u0430\u043c"})]}),(n||t)&&(0,y.jsxs)(ge.Z.Item,{className:X,eventKey:"3",onClick:function(){i((0,r.HY)(s))},children:[(0,y.jsx)("div",{className:$,children:"\u0412\u043e\u0441\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c"}),(0,y.jsx)("img",{src:he,className:ae,alt:"\u0412\u043e\u0441\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c"})]})]})]})})})})),Me=(0,t.memo)((function(e){var s=e.id,a=e.body,n=e.addedAt,d=e.senderId,r=e.myId,i=e.deletedBySender,c=e.isSpam,l=e.addedAtPrev,m=I(n),g=I(l),u=r===d,_=(0,t.useState)(""),h=(0,o.Z)(_,2),v=h[0],M=h[1];return(0,y.jsxs)("div",{children:["".concat(m.Day,"-").concat(m.Month,"-").concat(m.Year)!=="".concat(g.Day,"-").concat(g.Month,"-").concat(g.Year)&&(0,y.jsx)("div",{className:le,children:(0,y.jsxs)("div",{className:me,children:[m.Day,".",m.Month,".",m.Year]})}),(0,y.jsx)("div",{className:"".concat(Y," ").concat(u?O:V),children:(0,y.jsxs)("div",{className:"".concat(B," ").concat(u?U:z),onMouseOver:function(){M(s)},onMouseLeave:function(){M("")},children:[i?(0,y.jsxs)("div",{children:[(0,y.jsx)("img",{className:ie,src:ue,alt:""}),(0,y.jsx)("div",{className:re,children:" \u044d\u0442\u043e \u0441\u043e\u043e\u0431\u0449\u0435\u043d\u0438\u0435 \u0443\u0434\u0430\u043b\u0435\u043d\u043e"})]}):(0,y.jsx)("div",{className:ce,children:a}),(0,y.jsxs)("div",{className:"".concat(ne," ").concat(u?te:de),children:[m.Hour,":",m.Minutes]}),c&&(0,y.jsx)("img",{className:oe,src:_e,alt:""}),(0,y.jsx)("div",{className:q,children:v===s&&(0,y.jsx)(ve,{id:s,isMyMessage:u,deletedBySender:i,isSpam:c})})]})})]})})),xe=a(5705),fe=a(1724),je=a(3360);var pe=a.p+"static/media/send-svg2.fca4a68a54e7d25372f7430fe55f0653.svg",Ne="Msg2SendMessageRender_sendSwg__etLEs",De=a(3370),Ie={newMessage:""},ye=fe.Ry({}),Re=(0,t.memo)((function(e){var s=e.Msg2SendMessage;console.log("\u0432\u0432\u043e\u0434 \u043d\u043e\u0432\u044b\u0445 \u0441\u043e\u043e\u0431\u0449\u0435\u043d\u0438\u0439");return(0,y.jsx)("div",{children:(0,y.jsx)(xe.J9,{initialValues:Ie,validationSchema:ye,onSubmit:function(e,a){var n=a.resetForm;s(e.newMessage),n()},children:function(e){e.handleReset;var s=e.values;return(0,y.jsx)(xe.l0,{children:(0,y.jsxs)("div",{className:"d-flex d-inline-block justify-content-center align-items-center",children:[(0,y.jsx)("div",{className:"col-9",children:(0,y.jsx)(De.t,{label:"",autoFocus:!1,name:"newMessage",type:"text",placeholder:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u0432\u0430\u0448\u0435 \u0441\u043e\u043e\u0431\u0449\u0435\u043d\u0438\u0435",leftLabelLength:""})}),(0,y.jsx)(je.Z,{variant:"light",className:"mx-2",type:"submit",disabled:!s.newMessage,children:(0,y.jsx)(De.C,{src:pe,className:Ne,alt:"\u041e\u0442\u043f\u0440\u0430\u0432\u0438\u0442\u044c \u0441\u043e\u043e\u0431\u0449\u0435\u043d\u0438\u0435",title:"\u041e\u0442\u043f\u0440\u0430\u0432\u0438\u0442\u044c \u0441\u043e\u043e\u0431\u0449\u0435\u043d\u0438\u0435"})})]})})}})})})),be=(0,t.memo)((function(e){var s=e.userId,a=e.D2Item;console.log("Header \u0441\u043e\u043e\u0431\u0449\u0435\u043d\u0438\u0439");var n=a&&a.photos&&a.photos.small?a.photos.small:N,t=I(a&&a.lastUserActivityDate);return(0,y.jsx)("div",{children:a&&(0,y.jsxs)("div",{children:[(0,y.jsx)("div",{className:F,children:a&&a.userName}),(0,y.jsx)(D.OL,{to:"/profile/"+s,children:(0,y.jsx)("img",{className:E,src:n,alt:"photoSrc"})}),(0,y.jsxs)("div",{className:L,children:["\u0411\u044b\u043b(\u0430): "," ",a&&t.isToday?(0,y.jsxs)("span",{children:[" \u0441\u0435\u0433\u043e\u0434\u043d\u044f \u0432 ",t.Hour,":",t.Minutes]}):(0,y.jsxs)("span",{children:[" ",t.Day,".",t.Month,".",t.Year]})]})]})})})),Se=(0,t.memo)((function(e){var s=e.pageWidth,a=e.mobileWidth,n=e.patch,t=e.MessagesNewerThen,d=e.Msg2SendMessage,r=e.userId,i=e.D2Item,o=e.myId;return(0,y.jsxs)("div",{children:["dialog2"===n&&s>a&&(0,y.jsx)("div",{className:"".concat(k," ").concat(Z),children:" \u0412\u044b\u0431\u0435\u0440\u0438\u0442\u0435 \u0434\u0438\u0430\u043b\u043e\u0433"}),"messages"===n&&(0,y.jsxs)("div",{children:[(0,y.jsx)("div",{className:"".concat(k," ").concat(A," ").concat(s<a?H:P),children:(0,y.jsx)(be,{userId:r,D2Item:i})}),(0,y.jsxs)("div",{className:"".concat(k," ").concat(T," ").concat(s<a?H:P),children:[t.map((function(e,s,a){var n=e.id,t=e.body,d=e.addedAt,r=e.senderId,i=e.deletedBySender,c=e.isSpam,l=s>0?a[s-1].addedAt:"";return(0,y.jsx)(Me,{id:n,body:t,addedAt:d,senderId:r,myId:o,deletedBySender:i,isSpam:c,addedAtPrev:l},n)})),(0,y.jsx)("div",{className:"second-block"})]}),(0,y.jsx)("div",{className:"".concat(k," ").concat(W," ").concat(s<a?H:P),children:(0,y.jsx)(Re,{Msg2SendMessage:d})})]})]})})),we=(0,t.memo)((function(e){var s=e.patch,a=e.pageWidth,n=e.mobileWidth,t=e.Dialog2All,d=e.MessagesNewerThen,r=e.Msg2SendMessage,o=e.userId,c=e.D2Item,l=e.myId;return(0,y.jsxs)("div",{className:i,children:[(0,y.jsx)(C,{pageWidth:a,mobileWidth:n,patch:s,Dialog2All:t}),(0,y.jsx)(Se,{pageWidth:a,mobileWidth:n,patch:s,MessagesNewerThen:d,Msg2SendMessage:r,userId:o,D2Item:c,myId:l})]})})),Ce=a(7781),ke=a(1852),Ae=a(3990),Ze=(0,Ce.qC)(ke.Z,Ae.Z)((function(e){var s=e.userId,a=(0,d.v9)((function(e){return e.dialog2.MessagesNewerThen})),i=(0,d.v9)((function(e){return e.dialog2.Markers})),o=(0,d.v9)((function(e){return e.dialog2.D2Item})),c=(0,d.v9)((function(e){return e.dialog2.Dialog2All})),l=(0,d.v9)((function(e){return e.app.patch})),m=(0,d.v9)((function(e){return e.auth.myId})),g=(0,d.v9)((function(e){return e.app.pageWidth})),u=(0,d.v9)((function(e){return e.app.mobileWidth})),_=r.PN.setMarkers,h=r.PN.setD2Item,v=r.PN.setd2Userid,M=(0,d.I0)(),x=document.querySelector(".second-block"),f=(0,t.useCallback)((function(){x&&x.scrollIntoView(!0)}),[x]);return(0,t.useEffect)((function(){M(v(s)),console.log("setd2Userid(userId)"),console.log("\u043f\u043e\u043b\u0443\u0447\u0438\u0442\u044c \u0441\u043e\u043e\u0431\u0449\u0435\u043d\u0438\u044f \u043f\u0440\u0438 \u0441\u043c\u0435\u043d\u0435 userId",s),M((0,r.vu)(s,"2022-04-30T19:10:31.843"));var e=c.filter((function(e){return e.id===s}))[0];e?M(h(e)):(0,r.sz)(s)}),[s,M,v,c,h]),(0,t.useEffect)((function(){0===s||i.straightFirstUploaded||(console.log("\u043d\u0430\u0447\u0430\u0442\u044c \u0434\u0438\u0430\u043b\u043e\u0433 \u043f\u043e \u043d\u0435\u043f\u0443\u0441\u0442\u043e\u043c\u0443 userId "),M((0,r.H3)(s)),M(_((0,n.Z)((0,n.Z)({},i),{},{straightFirstUploaded:!0}))))}),[s,i,_,M]),(0,t.useEffect)((function(){"dialog2"===l&&!i.Dialog2FirstUploaded&&m&&(console.log("\u0415\u0434\u0438\u043d\u0438\u0447\u043d\u043e\u0435 \u043f\u043e\u043b\u0443\u0447\u0435\u043d\u0438\u0435 \u0441\u043f\u0438\u0441\u043a\u0430 \u0434\u0438\u0430\u043b\u043e\u0433\u043e\u0432 \u043d\u0430 \u0441\u0442\u0440\u0430\u043d\u0438\u0446\u0435 dialog2"),M((0,r.sz)(m,1,10)),M(_((0,n.Z)((0,n.Z)({},i),{},{Dialog2FirstUploaded:!0}))))}),[l,i,_,m,M]),(0,t.useEffect)((function(){i.needToScrollBottom&&(f(),M(_((0,n.Z)((0,n.Z)({},i),{},{needToScrollBottom:!1}))))}),[f,i,_,M]),(0,y.jsx)("div",{children:(0,y.jsx)(we,{Dialog2All:(0,t.useMemo)((function(){return c}),[c]),MessagesNewerThen:(0,t.useMemo)((function(){return a}),[a]),D2Item:(0,t.useMemo)((function(){return o}),[o]),patch:l,pageWidth:g,mobileWidth:u,Msg2SendMessage:function(e){M((0,r.D9)(e,"2022-04-30T19:10:31.843")),i.dialogId!==s&&(M((0,r.H3)(s)),M(_((0,n.Z)((0,n.Z)({},i),{},{dialogId:s}))))},userId:s,myId:m})})}))},3990:function(e,s,a){var n=a(1413),t=(a(2791),a(8687)),d=a(7689),r=a(184),i=function(e){return{isAuth:e.auth.isAuth}};s.Z=function(e){return(0,t.$j)(i,null)((function(s){return s.isAuth?(0,r.jsx)(e,(0,n.Z)({},s)):(0,r.jsx)(d.Fg,{to:"../login"})}))}},1852:function(e,s,a){var n=a(1413),t=(a(2791),a(7689)),d=a(8687),r=a(184);s.Z=function(e){return(0,d.$j)(null,null)((function(s){var a={params:(0,t.UO)()},d=Number(a.params["*"]);return(0,r.jsx)(e,(0,n.Z)((0,n.Z)({},s),{},{userId:d}))}))}}}]);
//# sourceMappingURL=708.950d8fe0.chunk.js.map