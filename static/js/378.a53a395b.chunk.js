"use strict";(self.webpackChunkmy_app=self.webpackChunkmy_app||[]).push([[378],{378:function(e,t,n){n.r(t),n.d(t,{default:function(){return D}});var a=n(2791),s=n(9439),r=n(8687),c=n(3347),i=n(5705),o=n(1724),l=n(6670),u=n(3360),h=n(4266),d=n(184),f={newMessage:""},m=o.Ry({}),v=function(e){var t=e.sendMessage,n=e.channelStatus;return(0,d.jsx)(d.Fragment,{children:(0,d.jsx)(i.J9,{initialValues:f,validationSchema:m,onSubmit:function(e,n){var a=n.resetForm;t(e.newMessage),a()},children:function(e){var t=e.values;return(0,d.jsxs)(i.l0,{children:[(0,d.jsxs)("div",{children:[(0,d.jsx)(l.rZ,{label:"\u041d\u043e\u0432\u043e\u0435 \u0441\u043e\u043e\u0431\u0449\u0435\u043d\u0438\u0435",autoFocus:!1,name:"newMessage",type:"text",placeholder:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u0432\u0430\u0448\u0435 \u0441\u043e\u043e\u0431\u0449\u0435\u043d\u0438\u0435",leftLabelLength:"",isDisabled:"ready"!==n}),(0,d.jsx)(h.Z,{direction:"vertical",gap:1,className:"mt-2",children:(0,d.jsx)(u.Z,{disabled:"ready"!==n||0===t.newMessage.length,type:"submit",children:"Submit"})})]}),(0,d.jsx)("div",{})]})}})})},x=n(7855),j="chat_chatBookmarkExtCommon__uXZD1",g="chat_chatBookmarkExt__Lsg1w",_="chat_hideChatBookmarkExt__KUute",p="chat_chatBookmark__H4JDn",b="chat_imgDialog__qsty6",Z="chat_ChatCommon__XiwNc",k="chat_MakeChatVisible__Cf2Xj",N="chat_MakeChatInvisible__cZ24Q",y="chat_MessageItem__Kl8H0",C=n(1087),w=n(2592),E=(0,a.memo)((function(){var e=(0,a.useState)(!1),t=(0,s.Z)(e,2),n=t[0],c=t[1],i=(0,a.useState)(!1),o=(0,s.Z)(i,2),l=o[0],u=o[1],h=(0,r.v9)((function(e){return e.chat.messages})),f=(0,a.useRef)(null);(0,a.useEffect)((function(){var e=f.current,t=e.scrollHeight,n=e.offsetHeight;t<=e.scrollTop+n+300&&c(!0),!l&&h.length>0&&(c(!0),u(!0))}),[h]);return(0,a.useEffect)((function(){!0===n&&function(){var e,t=f.current.scrollHeight;null===(e=f.current)||void 0===e||e.scrollTo({top:t,behavior:"smooth"}),c(!1)}()}),[n]),(0,d.jsx)("div",{ref:f,style:{height:"15rem",overflowY:"auto"},children:h.map((function(e,t){return(0,d.jsx)(S,{message:e},t)}))})})),S=(0,a.memo)((function(e){var t=e.message;return(0,d.jsxs)("div",{className:y,children:[(0,d.jsx)(C.OL,{to:"/profile/"+t.userId,children:(0,d.jsx)(w.Z,{fluid:!0,src:t.photo,className:"float-start my-2 mx-2 shadow rounded",style:{width:"3rem"},alt:"avatar",title:"\u041f\u0440\u043e\u0444\u0438\u043b\u044c ".concat(t.userId)})}),(0,d.jsx)("h5",{children:(0,d.jsx)("b",{children:t.userName})}),(0,d.jsx)("div",{className:"flex-grow-1 ms-3",children:(0,d.jsxs)("div",{children:[" ",t.message," "]})}),(0,d.jsx)("hr",{})]})})),M=function(){var e=(0,r.v9)((function(e){return e.chat.channelStatus})),t=(0,r.I0)();return(0,d.jsx)(v,{sendMessage:function(e){e&&t((0,c.rR)(e))},channelStatus:e})},B=(0,a.memo)((function(){var e=c.ON.switchRenderChat,t=c.ON.setChatInitialState,n=(0,r.v9)((function(e){return e.theme.themeBLL})),s=(0,r.I0)();return(0,a.useEffect)((function(){return s((0,c.WE)()),function(){s((0,c.R7)()),s(t())}}),[]),(0,d.jsxs)(x.Z,{bg:n,onClose:function(){return s(e())},children:[(0,d.jsx)(x.Z.Header,{children:(0,d.jsx)("strong",{className:"me-auto",children:"\u041e\u0431\u0449\u0438\u0439 \u0447\u0430\u0442"})}),(0,d.jsxs)(x.Z.Body,{children:[(0,d.jsx)(E,{})," ",(0,d.jsx)(M,{})," "]})]})})),I=n(7781),L=n(3990);var H=n.p+"static/media/dialog-black.58ab178e86bc68d0b3914e5972d809b0.svg";var R=n.p+"static/media/dialog-light.41903a6d132ae6aee8e10dd798d9b5e0.svg",O=(0,a.memo)((function(){var e=(0,r.I0)(),t=c.ON.switchRenderChat,n=(0,r.v9)((function(e){return e.theme.themeBLL}));return(0,d.jsx)("div",{children:(0,d.jsxs)("div",{onClick:function(){return e(t())},children:[(0,d.jsx)("div",{className:p,children:(0,d.jsx)(x.Z,{bg:n,children:(0,d.jsx)(x.Z.Body,{children:(0,d.jsx)("strong",{className:"me-auto",children:"\u041e\u0431\u0449\u0438\u0439 \u0447\u0430\u0442"})})})}),(0,d.jsx)("img",{src:"light"===n?H:R,alt:"\u0417\u0430\u0434\u0430\u0442\u044c \u0432\u043e\u043f\u0440\u043e\u0441",title:"\u0417\u0430\u0434\u0430\u0442\u044c \u0432\u043e\u043f\u0440\u043e\u0441",className:b})]})})})),D=(0,I.qC)(L.Z)((function(){var e=(0,r.v9)((function(e){return e.chat.renderChat}));return(0,d.jsxs)("div",{children:[(0,d.jsxs)("div",{className:"".concat(j," ").concat(e?_:g),children:[(0,d.jsx)(O,{}),"  "]}),(0,d.jsx)("div",{className:"".concat(Z," ").concat(e?k:N),children:(0,d.jsx)(B,{})})]})}))},3990:function(e,t,n){var a=n(1413),s=(n(2791),n(8687)),r=n(7689),c=n(184),i=function(e){return{isAuth:e.auth.isAuth}};t.Z=function(e){return(0,s.$j)(i,null)((function(t){return t.isAuth?(0,c.jsx)(e,(0,a.Z)({},t)):(0,c.jsx)(r.Fg,{to:"../login"})}))}},4266:function(e,t,n){n.d(t,{Z:function(){return v}});var a=n(3433),s=n(1413),r=n(5987),c=n(1694),i=n.n(c),o=n(2791),l=n(162),u=n(9439);function h(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:l.Hz,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:l.cs,a=[];return Object.entries(e).forEach((function(e){var s=(0,u.Z)(e,2),r=s[0],c=s[1];null!=c&&("object"===typeof c?t.forEach((function(e){var t=c[e];if(null!=t){var s=e!==n?"-".concat(e):"";a.push("".concat(r).concat(s,"-").concat(t))}})):a.push("".concat(r,"-").concat(c)))})),a}var d=n(184),f=["as","bsPrefix","className","direction","gap"],m=o.forwardRef((function(e,t){var n=e.as,c=void 0===n?"div":n,o=e.bsPrefix,u=e.className,m=e.direction,v=e.gap,x=(0,r.Z)(e,f);o=(0,l.vE)(o,"horizontal"===m?"hstack":"vstack");var j=(0,l.pi)(),g=(0,l.zG)();return(0,d.jsx)(c,(0,s.Z)((0,s.Z)({},x),{},{ref:t,className:i().apply(void 0,[u,o].concat((0,a.Z)(h({gap:v},j,g))))}))}));m.displayName="Stack";var v=m}}]);
//# sourceMappingURL=378.a53a395b.chunk.js.map