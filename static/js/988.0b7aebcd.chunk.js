"use strict";(self.webpackChunkmy_app=self.webpackChunkmy_app||[]).push([[988],{3988:function(e,s,a){a.r(s),a.d(s,{default:function(){return Ee}});var n=a(1413),t=a(2791),i=a(8687),o=a(5870),r="msg2_sendSwg__6J6oT",c="msg2_messages2RenderMessages__FfCI7",d="msg2_MobileMessagesLeft__Fszg-",l="msg2_DesktopMessagesLeft__giM5b",m="msg2_dialog2Messages2Common__Jcsyr",g="msg2_Fixed__NTk8G",u="msg2_messages2NameAndProfileLink__KbS-k",_="msg2_messages2ChooseDialog__2IOAU",h="msg2_messages2PrintMessage__nJ37v",v="msg2_Msg2HeaderName__9TnNU",f="msg2_Msg2HeaderPhoto__E1A6y",x="msg2_Msg2HeaderActivityDate__ArIUd",p="msg2_myIdNotMyIdMsg2ComExt__d61Ae",M="msg2_myIdMessageExt__COEoZ",j="msg2_NOTmyIdMessageExt__korn+",N="msg2_myIdNotMyIdMsg2ComInt__0+N8k",b="msg2_myIdMessageInt__2zKFh",I="msg2_NOTmyIdMessageInt__Qcpgy",y="msg2_Msg2DropDownMenuExt__xiV4b",D="msg2_Msg2DropDownMenuIntCommon__Y7URR",S="msg2_Msg2DropDownMenuIntMy__SBdru",C="msg2_Msg2DropDownMenuIntNotMy__bG4Ug",w="msg2_Msg2DropDownItems__Y+1WI",k="msg2_positionRelative__bgY1G",A="msg2_DropdownItem__9NX+O",T="msg2_imgDelete__cCIhk",Z="msg2_imgSpam__-zA3z",W="msg2_imgRestore__TGovD",R="msg2_Msg2ItemAdedAtCommon__nO1kU",F="msg2_ColorMy__7rgTv",E="msg2_ColorNotMy__y2cFM",H="msg2_Msg2DeletedText__Jvcj9",Y="msg2_Msg2DeletedPic__lCgmi",P="msg2_Msg2SpamPic__JxWIA",U="msg2_Msg2Body__7HtbA",L="msg2_Msg2DateExt__ioNCS",O="msg2_Msg2DateInt__JjUdN",B=a(9439),J="dialog2Render_Fixed__yAlTJ",V="dialog2Render_dialog2ListCommon__ZMqFo",z="dialog2Render_MobileDialogWidth__ahAt-",G="dialog2Render_DesktopDialogWidth__zSxVR",K="dialog2Render_Dialog2ItemCardExt__LODJo",q="dialog2Render_Dialog2ItemCardInt__HQqPI",Q="dialog2Render_Dialog2ItemCardName__zSixE",$="dialog2Render_Dialog2ItemCardPhoto__jPmgw",X="dialog2Render_Dialog2ItemCardNewMsgCnt__TrWvv",ee="dialog2Render_Dialog2ItemCardMsgTime__2bCd+",se="dialog2Render_dialog2HeaderCommon__YO-4Y",ae="dialog2Render_Dialog2SearchInput__uF7Sy",ne="dialog2Render_MagnifyingGlass__VpERP",te=a(6110),ie=a(1087),oe=function(e){var s,a=new Date(e?new Date(e).getTime()+108e5:0),n=!!e&&(new Date).getFullYear()===a.getFullYear()&&(new Date).getMonth()===a.getMonth()&&(new Date).getDate()===a.getDate(),t=("0"+a.getFullYear()).substr(-4),i=a.getMonth(),o=("0"+a.getDate()).substr(-2),r=("0"+a.getHours()).substr(-2),c=("0"+a.getMinutes()).substr(-2),d=("0"+a.getSeconds()).substr(-2);switch(i){case 0:s="01";break;case 1:s="02";break;case 2:s="03";break;case 3:s="04";break;case 4:s="05";break;case 5:s="06";break;case 6:s="07";break;case 7:s="08";break;case 8:s="09";break;case 9:s="10";break;case 10:s="11";break;case 11:s="12";break;default:s=""}return{Year:t,Month:s,Day:o,Hour:r,Minutes:c,Seconds:d,isToday:n}},re=a(184),ce=(0,t.memo)((function(e){var s=e.userName,a=e.hasNewMessages,n=e.photosSmall,t=e.lastDialogActivityDate,i=e.newMessagesCount,o=e.id;console.log("Dialog2Item");var r=oe(t);return(0,re.jsx)("div",{className:K,children:(0,re.jsx)(ie.OL,{to:"/messages/"+o,children:(0,re.jsxs)("div",{className:q,children:[(0,re.jsx)("div",{className:Q,children:s}),"   ",a&&(0,re.jsx)("div",{className:X,children:i})," ",(0,re.jsx)("img",{src:n||te,className:$,alt:"CardPhoto"})," ",(0,re.jsx)("div",{className:ee,children:r.isToday?(0,re.jsxs)("span",{children:[" ",r.Hour,":",r.Minutes]}):(0,re.jsxs)("span",{children:[" ",r.Day," ",r.Month," ",r.Year]})})]})})})}));var de=a.p+"static/media/magnifying-glass.3e5e2c21301cb96ebac59d5c181f8886.svg",le=(0,t.memo)((function(e){var s=e.SearchValue,a=e.setSearchValue;return console.log("\u043e\u0442\u0440\u0438\u0441\u043e\u0432\u043a\u0430 \u043f\u043e\u043b\u044f \u043f\u043e\u0438\u0441\u043a\u0430 \u0441\u0440\u0435\u0434\u0438 dialogs2"),(0,re.jsxs)("div",{children:[(0,re.jsx)("input",{placeholder:"\u041f\u043e\u0438\u0441\u043a",value:s,onChange:function(e){return a(e.target.value)},type:"text",className:ae}),(0,re.jsx)("img",{src:de,className:ne,alt:"\u041f\u043e\u0438\u0441\u043a"})]})})),me=function(e){var s=e.pageWidth,a=e.mobileWidth,n=e.patch,i=e.dialog2All,o=(0,t.useState)(""),r=(0,B.Z)(o,2),c=r[0],d=r[1],l=i&&i.filter((function(e){return e.userName.toLowerCase().includes(c.toLowerCase())}));return(0,re.jsx)("div",{children:("messages"===n&&s>a||"dialog2"===n)&&(0,re.jsxs)("div",{children:[(0,re.jsx)("div",{className:"".concat(J," ").concat(se," ").concat(s<a?z:G),children:(0,re.jsx)(le,{SearchValue:c,setSearchValue:d})}),(0,re.jsx)("div",{className:"".concat(J," ").concat(V," ").concat(s<a?z:G),children:l.map((function(e){var s=e.id,a=e.userName,n=e.hasNewMessages,t=e.lastDialogActivityDate,i=e.newMessagesCount,o=e.photos.small;return(0,re.jsx)(ce,{userName:a,hasNewMessages:n,photosSmall:o,lastDialogActivityDate:t,newMessagesCount:i,id:s},s)}))})]})})},ge=t.memo(me),ue=a(5705),_e=a(1724),he=a(3360);var ve=a.p+"static/media/send-svg2.fca4a68a54e7d25372f7430fe55f0653.svg",fe=a(3370),xe={newMessage:""},pe=_e.Ry({}),Me=function(e){var s=e.Msg2SendMessage,a=e.isMobile;console.log("\u043f\u043e\u043b\u0435 \u0432\u0432\u043e\u0434\u0430 \u043d\u043e\u0432\u044b\u0445 \u0441\u043e\u043e\u0431\u0449\u0435\u043d\u0438\u0439");return(0,re.jsx)("div",{className:"".concat(g," ").concat(h," ").concat(a?d:l),children:(0,re.jsx)(ue.J9,{initialValues:xe,validationSchema:pe,onSubmit:function(e,a){var n=a.resetForm;s(e.newMessage),n()},children:function(e){e.handleReset;var s=e.values;return(0,re.jsx)(ue.l0,{children:(0,re.jsxs)("div",{className:"d-flex d-inline-block justify-content-center align-items-center",children:[(0,re.jsx)("div",{className:"col-9",children:(0,re.jsx)(fe.t,{label:"",autoFocus:!1,name:"newMessage",type:"text",placeholder:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u0432\u0430\u0448\u0435 \u0441\u043e\u043e\u0431\u0449\u0435\u043d\u0438\u0435",leftLabelLength:""})}),(0,re.jsx)(he.Z,{variant:"light",className:"mx-2",type:"submit",disabled:!s.newMessage,children:(0,re.jsx)(fe.C,{src:ve,className:r,alt:"\u041e\u0442\u043f\u0440\u0430\u0432\u0438\u0442\u044c \u0441\u043e\u043e\u0431\u0449\u0435\u043d\u0438\u0435",title:"\u041e\u0442\u043f\u0440\u0430\u0432\u0438\u0442\u044c \u0441\u043e\u043e\u0431\u0449\u0435\u043d\u0438\u0435"})})]})})}})})},je=function(){console.log("\u043f\u043e\u043b\u0435 \u0432\u0432\u043e\u0434\u0430 \u043d\u043e\u0432\u044b\u0445 \u0441\u043e\u043e\u0431\u0449\u0435\u043d\u0438\u0439 - \u043a\u043e\u043d\u0442\u0435\u0439\u043d\u0435\u0440");var e=(0,i.I0)(),s=(0,i.v9)((function(e){return e.dialog2.d2Item.id})),a=(0,i.v9)((function(e){return e.app.pageWidth})),n=(0,i.v9)((function(e){return e.app.mobileWidth}));(0,t.useEffect)((function(){console.log("\u0438\u043d\u0438\u0446\u0438\u0438\u0440\u043e\u0432\u0430\u0442\u044c \u0434\u0438\u0430\u043b\u043e\u0433 \u043f\u0440\u0438 \u0441\u043c\u0435\u043d\u0435 userId"),e((0,o.H3)(s))}),[s]);var r=a<n;return(0,re.jsx)(Me,{Msg2SendMessage:function(s){e((0,o.D9)(s,"2022-04-30T19:10:31.843"))},isMobile:r})},Ne=function(e){var s=e.d2Item,a=e.isMobile;console.log("\u0448\u0430\u043f\u043a\u0430 \u0441\u043e\u043e\u0431\u0449\u0435\u043d\u0438\u0439");var n=s&&s.photos&&s.photos.small?s.photos.small:te,t=oe(s&&s.lastUserActivityDate);return(0,re.jsx)("div",{className:"".concat(g," ").concat(u," ").concat(a?d:l),children:s&&(0,re.jsxs)("div",{children:[(0,re.jsx)("div",{className:v,children:s&&s.userName}),(0,re.jsx)(ie.OL,{to:"/profile/"+s.id,children:(0,re.jsx)("img",{className:f,src:n,alt:"photoSrc"})}),(0,re.jsxs)("div",{className:x,children:["\u0411\u044b\u043b(\u0430): "," ",s&&t.isToday?(0,re.jsxs)("span",{children:[" \u0441\u0435\u0433\u043e\u0434\u043d\u044f \u0432 ",t.Hour,":",t.Minutes]}):(0,re.jsxs)("span",{children:[" ",t.Day,".",t.Month,".",t.Year]})]})]})})},be=function(){console.log("\u0448\u0430\u043f\u043a\u0430 \u0441\u043e\u043e\u0431\u0449\u0435\u043d\u0438\u0439 - \u043a\u043e\u043d\u0442\u0435\u0439\u043d\u0435\u0440");var e=(0,i.v9)((function(e){return e.dialog2.d2Item})),s=(0,i.v9)((function(e){return e.app.pageWidth}))<(0,i.v9)((function(e){return e.app.mobileWidth}));return(0,re.jsx)(Ne,{d2Item:e,isMobile:s})},Ie=a(8789);var ye=a.p+"static/media/dust-bin2.9f266211d62f71a82d41f9c57beb3d28.svg";var De=a.p+"static/media/spam1.c38e496626cdf8fb2aae68cddb1227de.svg";var Se=a.p+"static/media/restore1.1c96ab0dd3d42ca07131c5eb6a164a47.svg",Ce=(0,t.memo)((function(e){var s=e.id,a=e.isMyMessage,n=e.deletedBySender,t=e.isSpam,r=(0,i.I0)();return(0,re.jsx)(re.Fragment,{children:(0,re.jsx)("div",{children:(0,re.jsxs)(Ie.Z,{children:[(0,re.jsx)(Ie.Z.Toggle,{className:"".concat(a?S:C," \n                         ").concat(D)}),(0,re.jsxs)(Ie.Z.Menu,{className:w,children:[!n&&(0,re.jsxs)(Ie.Z.Item,{className:k,eventKey:"1",onClick:function(){r((0,o.fv)(s))},children:[(0,re.jsx)("div",{className:A,children:"\u0423\u0434\u0430\u043b\u0438\u0442\u044c \u0443 \u043c\u0435\u043d\u044f"}),(0,re.jsx)("img",{src:ye,className:T,alt:"\u0423\u0434\u0430\u043b\u0438\u0442\u044c \u0443 \u043c\u0435\u043d\u044f"})]}),!a&&!t&&(0,re.jsxs)(Ie.Z.Item,{className:k,eventKey:"2",onClick:function(){r((0,o.ho)(s))},children:[(0,re.jsx)("div",{className:A,children:"\u0412 \u0441\u043f\u0430\u043c"}),(0,re.jsx)("img",{src:De,className:Z,alt:"\u0412 \u0441\u043f\u0430\u043c"})]}),(n||t)&&(0,re.jsxs)(Ie.Z.Item,{className:k,eventKey:"3",onClick:function(){r((0,o.HY)(s))},children:[(0,re.jsx)("div",{className:A,children:"\u0412\u043e\u0441\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c"}),(0,re.jsx)("img",{src:Se,className:W,alt:"\u0412\u043e\u0441\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c"})]})]})]})})})})),we=(0,t.memo)((function(e){var s=e.id,a=e.body,n=e.addedAt,i=e.senderId,o=e.myId,r=e.deletedBySender,c=e.isSpam,d=e.addedAtPrev,l=oe(n),m=oe(d),g=o===i,u=(0,t.useState)(""),_=(0,B.Z)(u,2),h=_[0],v=_[1];return(0,re.jsxs)("div",{children:["".concat(l.Day,"-").concat(l.Month,"-").concat(l.Year)!=="".concat(m.Day,"-").concat(m.Month,"-").concat(m.Year)&&(0,re.jsx)("div",{className:L,children:(0,re.jsxs)("div",{className:O,children:[l.Day,".",l.Month,".",l.Year]})}),(0,re.jsx)("div",{className:"".concat(p," ").concat(g?M:j),children:(0,re.jsxs)("div",{className:"".concat(N," ").concat(g?b:I),onMouseOver:function(){v(s)},onMouseLeave:function(){v("")},children:[r?(0,re.jsxs)("div",{children:[(0,re.jsx)("img",{className:Y,src:ye,alt:""}),(0,re.jsx)("div",{className:H,children:" \u044d\u0442\u043e \u0441\u043e\u043e\u0431\u0449\u0435\u043d\u0438\u0435 \u0443\u0434\u0430\u043b\u0435\u043d\u043e"})]}):(0,re.jsx)("div",{className:U,children:a}),(0,re.jsxs)("div",{className:"".concat(R," ").concat(g?F:E),children:[l.Hour,":",l.Minutes]}),c&&(0,re.jsx)("img",{className:P,src:De,alt:""}),(0,re.jsx)("div",{className:y,children:h===s&&(0,re.jsx)(Ce,{id:s,isMyMessage:g,deletedBySender:r,isSpam:c})})]})})]})})),ke=function(e){var s=e.messagesNewerThen,a=e.myId,n=e.isMobile;return console.log("\u043e\u0442\u0440\u0438\u0441\u043e\u0432\u043a\u0430 \u0441\u043e\u043e\u0431\u0449\u0435\u043d\u0438\u0439"),(0,re.jsxs)("div",{className:"".concat(g," ").concat(c," ").concat(n?d:l),children:[s.map((function(e,s,n){var t=e.id,i=e.body,o=e.addedAt,r=e.senderId,c=e.deletedBySender,d=e.isSpam,l=s>0?n[s-1].addedAt:"";return(0,re.jsx)(we,{id:t,body:i,addedAt:o,senderId:r,myId:a,deletedBySender:c,isSpam:d,addedAtPrev:l},t)})),(0,re.jsx)("div",{className:"second-block"})]})},Ae=function(){console.log("\u043e\u0442\u0440\u0438\u0441\u043e\u0432\u043a\u0430 \u0441\u043e\u043e\u0431\u0449\u0435\u043d\u0438\u0439 - \u043a\u043e\u043d\u0442\u0435\u0439\u043d\u0435\u0440");var e=(0,i.v9)((function(e){return e.app.pageWidth})),s=(0,i.v9)((function(e){return e.app.mobileWidth})),a=(0,i.v9)((function(e){return e.dialog2.messagesNewerThen})),n=(0,i.v9)((function(e){return e.auth.myId})),t=e<s;return(0,re.jsx)(ke,{messagesNewerThen:a,myId:n,isMobile:t})},Te=function(){var e=(0,i.v9)((function(e){return e.app.patch})),s=(0,i.v9)((function(e){return e.app.pageWidth}))<(0,i.v9)((function(e){return e.app.mobileWidth})),a=(0,t.useMemo)((function(){return(0,re.jsx)(be,{})}),[]),n=(0,t.useMemo)((function(){return(0,re.jsx)(Ae,{})}),[]),o=(0,t.useMemo)((function(){return(0,re.jsx)(je,{})}),[]);return(0,re.jsxs)("div",{children:["dialog2"===e&&!s&&(0,re.jsx)("div",{className:"".concat(g," ").concat(_),children:" \u0412\u044b\u0431\u0435\u0440\u0438\u0442\u0435 \u0434\u0438\u0430\u043b\u043e\u0433"}),"messages"===e&&(0,re.jsxs)("div",{children:[a," ",n," ",o," "]})]})},Ze=function(e){var s=e.patch,a=e.pageWidth,n=e.mobileWidth,t=e.dialog2All;return(0,re.jsxs)("div",{className:m,children:[(0,re.jsx)(ge,{pageWidth:a,mobileWidth:n,patch:s,dialog2All:t}),(0,re.jsx)(Te,{})," "]})},We=a(7781),Re=a(1852),Fe=a(3990),Ee=(0,We.qC)(Re.Z,Fe.Z)((function(e){var s=e.userId,a=(0,i.v9)((function(e){return e.dialog2.messagesNewerThen})),r=(0,i.v9)((function(e){return e.dialog2.markers})),c=(0,i.v9)((function(e){return e.dialog2.d2Item})),d=(0,i.v9)((function(e){return e.dialog2.dialog2All})),l=(0,i.v9)((function(e){return e.auth.myId})),m=(0,i.v9)((function(e){return e.app.patch})),g=(0,i.v9)((function(e){return e.app.pageWidth})),u=(0,i.v9)((function(e){return e.app.mobileWidth})),_=o.PN.setMarkers,h=o.PN.setD2Item,v=(0,i.I0)(),f=document.querySelector(".second-block"),x=(0,t.useCallback)((function(){f&&f.scrollIntoView(!0)}),[f]);return(0,t.useEffect)((function(){console.log("\u043f\u043e\u043b\u0443\u0447\u0438\u0442\u044c \u0441\u043e\u043e\u0431\u0449\u0435\u043d\u0438\u044f \u043f\u0440\u0438 \u0441\u043c\u0435\u043d\u0435 userId",s),v((0,o.vu)(s,"2019-04-30T19:10:31.843"));var e=d.filter((function(e){return e.id===s}))[0];e?v(h(e)):(console.log("\u041f\u043e\u043b\u0443\u0447\u0435\u043d\u0438\u0435 \u0441\u043f\u0438\u0441\u043a\u0430 \u0434\u0438\u0430\u043b\u043e\u0433\u043e\u0432 \u043f\u0440\u0438 \u0441\u043c\u0435\u043d\u0435 userId"),(0,o.sz)())}),[s]),(0,t.useEffect)((function(){"dialog2"===m&&!r.dialog2FirstUploaded&&l&&(console.log("\u0415\u0434\u0438\u043d\u0438\u0447\u043d\u043e\u0435 \u043f\u043e\u043b\u0443\u0447\u0435\u043d\u0438\u0435 \u0441\u043f\u0438\u0441\u043a\u0430 \u0434\u0438\u0430\u043b\u043e\u0433\u043e\u0432 \u043d\u0430 \u0441\u0442\u0440\u0430\u043d\u0438\u0446\u0435 dialog2"),v((0,o.sz)()),v(_((0,n.Z)((0,n.Z)({},r),{},{dialog2FirstUploaded:!0}))))}),[r]),(0,t.useEffect)((function(){0===s||r.straightFirstUploaded||(console.log("\u043d\u0430\u0447\u0430\u0442\u044c \u0434\u0438\u0430\u043b\u043e\u0433 \u043f\u043e \u043d\u0435\u043f\u0443\u0441\u0442\u043e\u043c\u0443 userId "),v((0,o.H3)(s)),v(_((0,n.Z)((0,n.Z)({},r),{},{straightFirstUploaded:!0}))))}),[s,r,_,v]),(0,t.useEffect)((function(){r.needToScrollBottom&&(x(),v(_((0,n.Z)((0,n.Z)({},r),{},{needToScrollBottom:!1}))))}),[x,r,_,v]),(0,re.jsx)("div",{children:(0,re.jsx)(Ze,{dialog2All:(0,t.useMemo)((function(){return d}),[d]),messagesNewerThen:(0,t.useMemo)((function(){return a}),[a]),d2Item:(0,t.useMemo)((function(){return c}),[c]),patch:m,pageWidth:g,mobileWidth:u,Msg2SendMessage:function(e){v((0,o.D9)(e,"2022-04-30T19:10:31.843")),c.id!==s&&(console.log("\u0415\u0441\u043b\u0438 \u043c\u044b \u0435\u0449\u0435 \u043d\u0435 \u043d\u0430\u0447\u0430\u043b\u0438 \u0434\u0438\u0430\u043b\u043e\u0433 \u0441 \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u0435\u043c, \u0438 \u043e\u0442\u043f\u0440\u0430\u0432\u0438\u043b\u0438 \u0441\u043e\u043e\u0431\u0449\u0435\u043d\u0438\u0435 - \u043d\u0430\u0447\u0430\u0442\u044c \u0434\u0438\u0430\u043b\u043e\u0433"),v((0,o.H3)(s)))},userId:s,myId:l})})}))},3990:function(e,s,a){var n=a(1413),t=(a(2791),a(8687)),i=a(7689),o=a(184),r=function(e){return{isAuth:e.auth.isAuth}};s.Z=function(e){return(0,t.$j)(r,null)((function(s){return s.isAuth?(0,o.jsx)(e,(0,n.Z)({},s)):(0,o.jsx)(i.Fg,{to:"../login"})}))}},1852:function(e,s,a){var n=a(1413),t=(a(2791),a(7689)),i=a(8687),o=a(184);s.Z=function(e){return(0,i.$j)(null,null)((function(s){var a={params:(0,t.UO)()},i=Number(a.params["*"]);return(0,o.jsx)(e,(0,n.Z)((0,n.Z)({},s),{},{userId:i}))}))}}}]);
//# sourceMappingURL=988.0b7aebcd.chunk.js.map