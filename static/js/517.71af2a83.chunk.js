"use strict";(self.webpackChunkmy_app=self.webpackChunkmy_app||[]).push([[517],{8517:function(e,n,r){r.r(n),r.d(n,{default:function(){return xe}});var t=r(5671),s=r(3144),a=r(136),o=r(7277),i=r(2791),l=r(8687),u=r(5732),c=r(9439),f="Users_userPhoto__5FOrl",d="Users_nameStatusCommon__IX8+8",g="Users_maxWidthcommon__XFAer",h="Users_maxWidth1Col__xpaYZ",p="Users_name__NXsmd",m="Users_status__dd8C6",v="Users_Relative__EtQqz",P="Users_line__EXs9E",y="Users_favImage__Fih2I",C="Users_star__9qeVm",x="Users_usersOverflowAuto__bmqmJ",j=(r(7632),r(1413)),w=r(5987),F=r(1694),_=r.n(F),k=r(162),N=r(6445),A=r(184),I=["active","disabled","className","style","activeLabel","children"],T=["children"],Z=i.forwardRef((function(e,n){var r=e.active,t=e.disabled,s=e.className,a=e.style,o=e.activeLabel,i=e.children,l=(0,w.Z)(e,I),u=r||t?"span":N.Z;return(0,A.jsx)("li",{ref:n,style:a,className:_()(s,"page-item",{active:r,disabled:t}),children:(0,A.jsxs)(u,(0,j.Z)((0,j.Z)({className:"page-link"},l),{},{children:[i,r&&o&&(0,A.jsx)("span",{className:"visually-hidden",children:o})]}))})}));Z.defaultProps={active:!1,disabled:!1,activeLabel:"(current)"},Z.displayName="PageItem";var S=Z;function U(e,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:e,t=i.forwardRef((function(e,t){var s=e.children,a=(0,w.Z)(e,T);return(0,A.jsxs)(Z,(0,j.Z)((0,j.Z)({},a),{},{ref:t,children:[(0,A.jsx)("span",{"aria-hidden":"true",children:s||n}),(0,A.jsx)("span",{className:"visually-hidden",children:r})]}))}));return t.displayName=e,t}var b=U("First","\xab"),z=U("Prev","\u2039","Previous"),L=U("Ellipsis","\u2026","More"),R=U("Next","\u203a"),O=U("Last","\xbb"),E=["bsPrefix","className","size"],W=i.forwardRef((function(e,n){var r=e.bsPrefix,t=e.className,s=e.size,a=(0,w.Z)(e,E),o=(0,k.vE)(r,"pagination");return(0,A.jsx)("ul",(0,j.Z)((0,j.Z)({ref:n},a),{},{className:_()(t,o,s&&"".concat(o,"-").concat(s))}))}));W.displayName="Pagination";var q=Object.assign(W,{First:b,Prev:z,Ellipsis:L,Item:S,Next:R,Last:O}),D="Pagination_pagination__utrCy",X=function(e){for(var n=e.totalUsersCount,r=e.pageSize,t=e.currentPage,s=e.onPageChanged,a=e.PortionSize,o=void 0===a?6:a,i=e.currentRangeLocal,l=e.onChangeRangeLocal,u=Math.ceil(n/r),c=[],f=1;f<=u;f++)c.push(f);var d=1+o*(i-1),g=o*i,h=c.filter((function(e){return e>=d&&e<=g})),p=function(e){"prevPortion"===e&&i>1&&l(-1),"nextPortion"===e&&l(1)},m=h.map((function(e){return(0,A.jsxs)(q.Item,{active:e===t,onClick:function(){s(e)},children:[e," "]},e)}));return(0,A.jsx)("div",{className:D,children:(0,A.jsxs)(q,{className:"pagination align-items-center justify-content-center",children:[" ",(0,A.jsx)(q.Prev,{onClick:function(){p("prevPortion")}})," ",m," ",(0,A.jsx)(q.Next,{onClick:function(){p("nextPortion")}}),"  "]})})},M=r(4266),Y=r(5313),B=r(3360),H=r(9410),J=r(2592);var Q=r.p+"static/media/star+.8f12c1f646656dcb9d3b823059f13349.svg",V=function(e){var n=e.onChangeTerm,r=e.onChangeTermFunction,t=e.SetTermFunction,s=e.handleClick,a=e.setOnlyFriends,o=e.onlyFriends;return(0,A.jsx)("div",{children:(0,A.jsx)(Y.Z,{children:(0,A.jsxs)(M.Z,{direction:"horizontal",gap:3,className:"mx-1",children:[(0,A.jsxs)(H.Z,{children:[(0,A.jsx)(H.Z.Text,{children:(0,A.jsx)(J.Z,{fluid:!0,src:Q,className:y})}),(0,A.jsx)(H.Z.Checkbox,{checked:o,onChange:function(e){e&&e.target&&a(e.target.checked)}}),(0,A.jsx)(Y.Z.Control,{type:"text",value:n,onChange:function(e){r(e)},onBlur:t,placeholder:"find users..."})," "]}),(0,A.jsx)("div",{className:"vr"})," ",(0,A.jsx)(B.Z,{onClick:s,type:"submit",children:"Find"})]})})})},$=r(7022),G=r(9743),K=r(9603),ee=r(1087),ne=r(6110);var re=r.p+"static/media/star-.0741470d42a207292c915853e443c7c4.svg",te=function(e){var n=e.u,r=e.followUnfollowAPICallback,t=e.followingInProgress,s=e.isAuth,a=t.some((function(e){return e===n.id}));return(0,A.jsx)("span",{children:(0,A.jsx)(J.Z,{fluid:!0,src:n.followed?Q:re,alt:"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u0432 \u0438\u0437\u0431\u0440\u0430\u043d\u043d\u043e\u0435",title:"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u0432 \u0438\u0437\u0431\u0440\u0430\u043d\u043d\u043e\u0435",onClick:function(){a||(s?r(n.id):alert("You are not authorized, please Login"))}})})},se=function(e){var n=e.users,r=e.unfollowAPI,t=e.followAPI,s=e.followingInProgress,a=e.isAuth,o=e.patch,i=e.PageWidth,l="";return"users"===o&&(i<460&&(l="grid1col"),i>=460&&i<800&&(l="grid2col"),i>=800&&i<1200&&(l="grid3col"),i>=1200&&i<1600&&(l="grid4col"),i>=1600&&i<2e3&&(l="grid5col"),i>=2e3&&(l="grid6col")),"dialogs"===o&&(l="grid1col"),(0,A.jsxs)("div",{className:l,children:[" ",n.map((function(e){return(0,A.jsxs)("div",{className:v,children:[(0,A.jsx)("div",{className:C,children:e.followed?(0,A.jsx)(te,{u:e,followUnfollowAPICallback:r,followingInProgress:s,isAuth:a}):(0,A.jsx)(te,{u:e,followUnfollowAPICallback:t,followingInProgress:s,isAuth:a})}),(0,A.jsx)(ee.OL,{to:"/dialogs/"+e.id,children:(0,A.jsxs)("div",{children:[(0,A.jsx)(J.Z,{fluid:!0,className:f,src:null!==e.photos.small?e.photos.small:ne,alt:"\u041f\u0435\u0440\u0435\u0439\u0442\u0438 \u0432 \u043f\u0440\u043e\u0444\u0438\u043b\u044c",title:"\u041f\u0435\u0440\u0435\u0439\u0442\u0438 \u0432 \u043f\u0440\u043e\u0444\u0438\u043b\u044c"}),(0,A.jsxs)("span",{className:"".concat(d," ").concat(p," ").concat("users"===o?g:h),children:[e.name&&e.name," "]}),(0,A.jsxs)("span",{className:"".concat(d," ").concat(m," ").concat("users"===o?g:h),children:[e.status&&e.status," "]})]})})]},e.id)}))]})},ae=function(e){var n=e.totalUsersCount,r=e.pageSize,t=e.currentPage,s=e.onPageChanged,a=e.users,o=e.followingInProgress,l=e.unfollowAPI,u=e.isAuth,f=e.followAPI,d=e.SetTermFunction,g=e.onChangeTerm,h=e.onChangeTermFunction,p=e.onChangeRangeLocal,m=e.currentRangeLocal,v=e.setOnlyFriends,y=e.onlyFriends,C=e.patch,j=e.PageWidth,w=(0,i.useState)({message:""}),F=(0,c.Z)(w,2),_=F[0],k=F[1];if(_.message)return _.message;try{var N=(0,A.jsxs)(G.Z,{className:"mt-3",children:[" ",(0,A.jsx)(X,{totalUsersCount:n,pageSize:r,currentPage:t,onPageChanged:s,currentRangeLocal:m,onChangeRangeLocal:p})]}),I=(0,A.jsx)(V,{onChangeTerm:g,onChangeTermFunction:h,SetTermFunction:d,handleClick:function(e){e.preventDefault(),d()},setOnlyFriends:v,onlyFriends:y}),T=(0,A.jsxs)(G.Z,{children:[" ",(0,A.jsxs)("div",{className:"d-flex justify-content-center opacity-50 mt-2 ",children:[" Total: ",n]}),(0,A.jsx)("div",{className:P})]}),Z=(0,A.jsxs)("div",{className:"my-4",children:[" ",(0,A.jsx)(se,{users:a,unfollowAPI:l,followAPI:f,followingInProgress:o,isAuth:u,patch:C,PageWidth:j})]});return(0,A.jsx)("div",{className:x,children:(0,A.jsxs)($.Z,{fluid:!0,children:[(0,A.jsx)("h2",{className:K.Z.pageHeader,children:"\u0427\u0430\u0442\u044b"})," ","users"===C&&N,I," ","users"===C&&T," ",Z]})})}catch(_){k(_)}},oe=r(8570),ie="NOT_FOUND";var le=function(e,n){return e===n};function ue(e,n){var r="object"===typeof n?n:{equalityCheck:n},t=r.equalityCheck,s=void 0===t?le:t,a=r.maxSize,o=void 0===a?1:a,i=r.resultEqualityCheck,l=function(e){return function(n,r){if(null===n||null===r||n.length!==r.length)return!1;for(var t=n.length,s=0;s<t;s++)if(!e(n[s],r[s]))return!1;return!0}}(s),u=1===o?function(e){var n;return{get:function(r){return n&&e(n.key,r)?n.value:ie},put:function(e,r){n={key:e,value:r}},getEntries:function(){return n?[n]:[]},clear:function(){n=void 0}}}(l):function(e,n){var r=[];function t(e){var t=r.findIndex((function(r){return n(e,r.key)}));if(t>-1){var s=r[t];return t>0&&(r.splice(t,1),r.unshift(s)),s.value}return ie}return{get:t,put:function(n,s){t(n)===ie&&(r.unshift({key:n,value:s}),r.length>e&&r.pop())},getEntries:function(){return r},clear:function(){r=[]}}}(o,l);function c(){var n=u.get(arguments);if(n===ie){if(n=e.apply(null,arguments),i){var r=u.getEntries().find((function(e){return i(e.value,n)}));r&&(n=r.value)}u.put(arguments,n)}return n}return c.clearCache=function(){return u.clear()},c}function ce(e){for(var n=arguments.length,r=new Array(n>1?n-1:0),t=1;t<n;t++)r[t-1]=arguments[t];return function(){for(var n=arguments.length,t=new Array(n),s=0;s<n;s++)t[s]=arguments[s];var a,o=0,i={memoizeOptions:void 0},l=t.pop();if("object"===typeof l&&(i=l,l=t.pop()),"function"!==typeof l)throw new Error("createSelector expects an output function after the inputs, but received: ["+typeof l+"]");var u=i.memoizeOptions,c=void 0===u?r:u,f=Array.isArray(c)?c:[c],d=function(e){var n=Array.isArray(e[0])?e[0]:e;if(!n.every((function(e){return"function"===typeof e}))){var r=n.map((function(e){return"function"===typeof e?"function "+(e.name||"unnamed")+"()":typeof e})).join(", ");throw new Error("createSelector expects all input-selectors to be functions, but received the following types: ["+r+"]")}return n}(t),g=e.apply(void 0,[function(){return o++,l.apply(null,arguments)}].concat(f)),h=e((function(){for(var e=[],n=d.length,r=0;r<n;r++)e.push(d[r].apply(null,arguments));return a=g.apply(null,e)}));return Object.assign(h,{resultFunc:l,memoizedResultFunc:g,dependencies:d,lastResult:function(){return a},recomputations:function(){return o},resetRecomputations:function(){return o=0}}),h}}var fe=ce(ue),de=function(e){return e.usersPage.pageSize},ge=function(e){return e.usersPage.totalUsersCount},he=function(e){return e.usersPage.currentPage},pe=function(e){return e.usersPage.isFetching},me=function(e){return e.usersPage.followingInProgress},ve=function(e){return e.auth.isAuth},Pe=function(e){return e.usersPage.onlyFriends},ye=fe((function(e){return e.usersPage.users}),(function(e){return e})),Ce=function(e){(0,a.Z)(r,e);var n=(0,o.Z)(r);function r(e){var s;return(0,t.Z)(this,r),(s=n.call(this,e)).onChangeTermFunction=function(e){s.setState({onChangeTerm:e.currentTarget.value})},s.onChangeRangeLocal=function(e){s.setState({currentRangeLocal:s.state.currentRangeLocal+e})},s.SetTermFunction=function(){s.props.setTerm(s.state.onChangeTerm)},s.onPageChanged=function(e){var n=s.props,r=n.setCurrentPage,t=n.getUsersThunkCreator,a=n.pageSize,o=n.term,i=n.onlyFriends;r(e),t(e,a,o,i,0)},s.followAPI=function(e){s.props.followThunkCreator(e,s.props.currentPage,s.props.pageSize,s.props.term,s.props.onlyFriends)},s.unfollowAPI=function(e){s.props.unfollowThunkCreator(e,s.props.currentPage,s.props.pageSize,s.props.term,s.props.onlyFriends)},s.state={onChangeTerm:s.props.term,currentRangeLocal:1},s}return(0,s.Z)(r,[{key:"componentDidMount",value:function(){var e=this.props;(0,e.getUsersThunkCreator)(e.currentPage,e.pageSize,e.term,e.onlyFriends,0)}},{key:"componentDidUpdate",value:function(e,n){if(e.term!==this.props.term||e.onlyFriends!==this.props.onlyFriends){this.props.setCurrentPage(1),this.setState({currentRangeLocal:1});var r=this.props;(0,r.getUsersThunkCreator)(1,r.pageSize,r.term,r.onlyFriends,0)}}},{key:"render",value:function(){var e=this.props,n=e.isFetching,r=e.totalUsersCount,t=e.pageSize,s=e.currentPage,a=e.users,o=e.followingInProgress,i=e.isAuth;return(0,A.jsxs)(A.Fragment,{children:[" ",n&&(0,A.jsx)(oe.Z,{}),(0,A.jsx)(ae,{onPageChanged:this.onPageChanged,totalUsersCount:r,pageSize:t,currentPage:s,users:a,unfollowAPI:this.unfollowAPI,followAPI:this.followAPI,followingInProgress:o,isAuth:i,SetTermFunction:this.SetTermFunction,onChangeTerm:this.state.onChangeTerm,onChangeTermFunction:this.onChangeTermFunction,currentRangeLocal:this.state.currentRangeLocal,onChangeRangeLocal:this.onChangeRangeLocal,setOnlyFriends:this.props.setOnlyFriends,onlyFriends:this.props.onlyFriends,patch:this.props.patch,PageWidth:this.props.PageWidth})]})}}]),r}(i.Component),xe=(0,l.$j)((function(e){return{users:ye(e),pageSize:de(e),totalUsersCount:ge(e),currentPage:he(e),isFetching:pe(e),followingInProgress:me(e),isAuth:ve(e),term:e.usersPage.term,myId:e.auth.myId,onlyFriends:Pe(e),patch:e.app.patch,PageWidth:e.app.PageWidth}}),{setCurrentPage:u.D4,getUsersThunkCreator:u.Uk,followThunkCreator:u.AC,unfollowThunkCreator:u.Ow,setTerm:u.nS,setOnlyFriends:u.F3})(Ce)}}]);
//# sourceMappingURL=517.71af2a83.chunk.js.map