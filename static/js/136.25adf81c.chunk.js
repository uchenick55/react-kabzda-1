"use strict";(self.webpackChunkmy_app=self.webpackChunkmy_app||[]).push([[136],{9900:function(e,n,t){t.r(n),t.d(n,{default:function(){return d}});var s=t(2791),r=t(3433),i=t(9439),u=t(184),o=function(e){var n=e.wsChannel,t=(0,s.useState)([]),o=(0,i.Z)(t,2),l=o[0],c=o[1];return(0,s.useEffect)((function(){var e=function(e){var n=JSON.parse(e.data);c((function(e){return[].concat((0,r.Z)(e),(0,r.Z)(n))}))};return null===n||void 0===n||n.removeEventListener("message",e),null===n||void 0===n||n.addEventListener("message",e),function(){null===n||void 0===n||n.removeEventListener("message",e)}}),[n]),(0,u.jsxs)("div",{style:{height:"400px",overflowY:"auto"},children:[" ",l.map((function(e,n){return(0,u.jsx)(a,{message:e},n)}))]})},a=function(e){var n=e.message;return(0,u.jsxs)("div",{children:[(0,u.jsx)("img",{src:n.photo,style:{width:"30px"}})," ",(0,u.jsx)("b",{children:n.userName})," ",(0,u.jsx)("br",{}),n.message," ",(0,u.jsx)("hr",{})]})},l=function(e){var n=e.wsChannel,t=(0,s.useState)(""),r=(0,i.Z)(t,2),o=r[0],a=r[1],l=(0,s.useState)("pending"),c=(0,i.Z)(l,2),d=c[0],v=c[1];(0,s.useEffect)((function(){var e=function(){v("ready"),console.log("open")};return n||v("pending"),null===n||void 0===n||n.removeEventListener("open",e),null===n||void 0===n||n.addEventListener("open",e),function(){null===n||void 0===n||n.removeEventListener("open",e),v("pending")}}),[n]);var f="ready"!==d;return(0,u.jsxs)("div",{children:[(0,u.jsx)("input",{disabled:f,value:o,onChange:function(e){a(e.currentTarget.value)}}),(0,u.jsx)("button",{onClick:function(){o&&(null===n||void 0===n||n.send(o)),a("")},disabled:f,children:"Send"})," "]})},c=function(){var e=(0,s.useState)(null),n=(0,i.Z)(e,2),t=n[0],r=n[1];return(0,s.useEffect)((function(){var e,n=function(){console.log("CLOSE WS"),r(null),setTimeout((function(){return t()}),3e3)},t=function(){var t;null===(t=e)||void 0===t||t.removeEventListener("close",n),(e=new WebSocket("wss://social-network.samuraijs.com/handlers/ChatHandler.ashx")).addEventListener("close",n),r(e)};return t(),function(){e.removeEventListener("close",n),e.close()}}),[]),(0,u.jsxs)("div",{children:[(0,u.jsx)(o,{wsChannel:t})," ",(0,u.jsx)(l,{wsChannel:t})," "]})},d=function(){return(0,u.jsx)("div",{children:(0,u.jsx)(c,{})})}}}]);
//# sourceMappingURL=136.25adf81c.chunk.js.map