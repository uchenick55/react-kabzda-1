"use strict";(self.webpackChunkmy_app=self.webpackChunkmy_app||[]).push([[517],{8517:function(e,n,r){r.r(n),r.d(n,{default:function(){return Ce}});var t=r(5671),s=r(3144),a=r(136),o=r(7277),i=r(2791),l=r(8687),u=r(5732),c=r(9439),f="Users_userPhoto__5FOrl",d="Users_nameStatusCommon__IX8+8",g="Users_name__NXsmd",h="Users_status__dd8C6",p="Users_Relative__EtQqz",m="Users_line__EXs9E",v="Users_favImage__Fih2I",P="Users_star__9qeVm",C="Users_cardsCenter__4LYC0",y=(r(7632),r(1413)),x=r(5987),j=r(1694),w=r.n(j),F=r(162),k=r(6445),I=r(184),N=["active","disabled","className","style","activeLabel","children"],T=["children"],_=i.forwardRef((function(e,n){var r=e.active,t=e.disabled,s=e.className,a=e.style,o=e.activeLabel,i=e.children,l=(0,x.Z)(e,N),u=r||t?"span":k.Z;return(0,I.jsx)("li",{ref:n,style:a,className:w()(s,"page-item",{active:r,disabled:t}),children:(0,I.jsxs)(u,(0,y.Z)((0,y.Z)({className:"page-link"},l),{},{children:[i,r&&o&&(0,I.jsx)("span",{className:"visually-hidden",children:o})]}))})}));_.defaultProps={active:!1,disabled:!1,activeLabel:"(current)"},_.displayName="PageItem";var A=_;function Z(e,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:e,t=i.forwardRef((function(e,t){var s=e.children,a=(0,x.Z)(e,T);return(0,I.jsxs)(_,(0,y.Z)((0,y.Z)({},a),{},{ref:t,children:[(0,I.jsx)("span",{"aria-hidden":"true",children:s||n}),(0,I.jsx)("span",{className:"visually-hidden",children:r})]}))}));return t.displayName=e,t}var S=Z("First","\xab"),U=Z("Prev","\u2039","Previous"),b=Z("Ellipsis","\u2026","More"),L=Z("Next","\u203a"),z=Z("Last","\xbb"),R=["bsPrefix","className","size"],O=i.forwardRef((function(e,n){var r=e.bsPrefix,t=e.className,s=e.size,a=(0,x.Z)(e,R),o=(0,F.vE)(r,"pagination");return(0,I.jsx)("ul",(0,y.Z)((0,y.Z)({ref:n},a),{},{className:w()(t,o,s&&"".concat(o,"-").concat(s))}))}));O.displayName="Pagination";var E=Object.assign(O,{First:S,Prev:U,Ellipsis:b,Item:A,Next:L,Last:z}),W="Pagination_pagination__utrCy",q=function(e){for(var n=e.totalUsersCount,r=e.pageSize,t=e.currentPage,s=e.onPageChanged,a=e.PortionSize,o=void 0===a?6:a,i=e.currentRangeLocal,l=e.onChangeRangeLocal,u=Math.ceil(n/r),c=[],f=1;f<=u;f++)c.push(f);var d=1+o*(i-1),g=o*i,h=c.filter((function(e){return e>=d&&e<=g})),p=function(e){"prevPortion"===e&&i>1&&l(-1),"nextPortion"===e&&l(1)},m=h.map((function(e){return(0,I.jsxs)(E.Item,{active:e===t,onClick:function(){s(e)},children:[e," "]},e)}));return(0,I.jsx)("div",{className:W,children:(0,I.jsxs)(E,{className:"pagination align-items-center justify-content-center",children:[" ",(0,I.jsx)(E.Prev,{onClick:function(){p("prevPortion")}})," ",m," ",(0,I.jsx)(E.Next,{onClick:function(){p("nextPortion")}}),"  "]})})},D=r(4266),M=r(5313),X=r(3360),Y=r(9410),B=r(2592);var H=r.p+"static/media/star+.8f12c1f646656dcb9d3b823059f13349.svg",Q=function(e){var n=e.onChangeTerm,r=e.onChangeTermFunction,t=e.SetTermFunction,s=e.handleClick,a=e.setOnlyFriends,o=e.onlyFriends;return(0,I.jsx)("div",{children:(0,I.jsx)(M.Z,{children:(0,I.jsxs)(D.Z,{direction:"horizontal",gap:3,className:"mx-1",children:[(0,I.jsxs)(Y.Z,{children:[(0,I.jsx)(Y.Z.Text,{children:(0,I.jsx)(B.Z,{fluid:!0,src:H,className:v})}),(0,I.jsx)(Y.Z.Checkbox,{checked:o,onChange:function(e){e&&e.target&&a(e.target.checked)}}),(0,I.jsx)(M.Z.Control,{type:"text",value:n,onChange:function(e){r(e)},onBlur:t,placeholder:"find users..."})," "]}),(0,I.jsx)("div",{className:"vr"})," ",(0,I.jsx)(X.Z,{onClick:s,type:"submit",children:"Find"})]})})})},V=r(7022),$=r(9743),G=r(9603),J=r(1087),K=r(6110);var ee=r.p+"static/media/star-.0741470d42a207292c915853e443c7c4.svg",ne=function(e){var n=e.u,r=e.followUnfollowAPICallback,t=e.followingInProgress,s=e.isAuth,a=t.some((function(e){return e===n.id}));return(0,I.jsx)("span",{children:(0,I.jsx)(B.Z,{fluid:!0,src:n.followed?H:ee,alt:"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u0432 \u0438\u0437\u0431\u0440\u0430\u043d\u043d\u043e\u0435",title:"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u0432 \u0438\u0437\u0431\u0440\u0430\u043d\u043d\u043e\u0435",onClick:function(){a||(s?r(n.id):alert("You are not authorized, please Login"))}})})},re=function(e){var n=e.users,r=e.unfollowAPI,t=e.followAPI,s=e.followingInProgress,a=e.isAuth,o=e.patch,i=e.PageWidth,l="";return"users"===o&&(i<460&&(l="grid1col"),i>=460&&i<800&&(l="grid2col"),i>=800&&i<1200&&(l="grid3col"),i>=1200&&i<1600&&(l="grid4col"),i>=1600&&i<2e3&&(l="grid5col"),i>=2e3&&(l="grid6col")),"dialogs"===o&&(l="grid1col"),(0,I.jsxs)("div",{className:l,children:[" ",n.map((function(e){return(0,I.jsxs)("div",{className:p,children:[(0,I.jsx)("div",{className:P,children:e.followed?(0,I.jsx)(ne,{u:e,followUnfollowAPICallback:r,followingInProgress:s,isAuth:a}):(0,I.jsx)(ne,{u:e,followUnfollowAPICallback:t,followingInProgress:s,isAuth:a})}),(0,I.jsx)(J.OL,{to:"/dialogs/"+e.id,children:(0,I.jsxs)("div",{children:[(0,I.jsx)(B.Z,{fluid:!0,className:f,src:null!==e.photos.small?e.photos.small:K,alt:"\u041f\u0435\u0440\u0435\u0439\u0442\u0438 \u0432 \u043f\u0440\u043e\u0444\u0438\u043b\u044c",title:"\u041f\u0435\u0440\u0435\u0439\u0442\u0438 \u0432 \u043f\u0440\u043e\u0444\u0438\u043b\u044c"}),(0,I.jsxs)("div",{className:g+" "+d,children:[e.name&&e.name," "]}),(0,I.jsxs)("div",{className:h+" "+d,children:[e.status&&e.status," "]})]})})]},e.id)}))]})},te=function(e){var n=e.totalUsersCount,r=e.pageSize,t=e.currentPage,s=e.onPageChanged,a=e.users,o=e.followingInProgress,l=e.unfollowAPI,u=e.isAuth,f=e.followAPI,d=e.SetTermFunction,g=e.onChangeTerm,h=e.onChangeTermFunction,p=e.onChangeRangeLocal,v=e.currentRangeLocal,P=e.setOnlyFriends,y=e.onlyFriends,x=e.patch,j=e.PageWidth,w=(0,i.useState)({message:""}),F=(0,c.Z)(w,2),k=F[0],N=F[1];if(k.message)return k.message;try{var T=(0,I.jsxs)($.Z,{className:"mt-3",children:[" ",(0,I.jsx)(q,{totalUsersCount:n,pageSize:r,currentPage:t,onPageChanged:s,currentRangeLocal:v,onChangeRangeLocal:p})]}),_=(0,I.jsx)(Q,{onChangeTerm:g,onChangeTermFunction:h,SetTermFunction:d,handleClick:function(e){e.preventDefault(),d()},setOnlyFriends:P,onlyFriends:y}),A=(0,I.jsxs)($.Z,{children:[" ",(0,I.jsxs)("div",{className:"d-flex justify-content-center opacity-50 mt-2 ",children:[" Total: ",n]}),(0,I.jsx)("div",{className:m})]}),Z=(0,I.jsxs)("div",{className:C,children:[" ",(0,I.jsx)(re,{users:a,unfollowAPI:l,followAPI:f,followingInProgress:o,isAuth:u,patch:x,PageWidth:j})]});return(0,I.jsx)("div",{children:(0,I.jsxs)(V.Z,{children:[(0,I.jsx)("h2",{className:G.Z.pageHeader,children:"\u0427\u0430\u0442\u044b"})," ","users"===x&&T,_," ","users"===x&&A," ",Z]})})}catch(k){N(k)}},se=r(8570),ae="NOT_FOUND";var oe=function(e,n){return e===n};function ie(e,n){var r="object"===typeof n?n:{equalityCheck:n},t=r.equalityCheck,s=void 0===t?oe:t,a=r.maxSize,o=void 0===a?1:a,i=r.resultEqualityCheck,l=function(e){return function(n,r){if(null===n||null===r||n.length!==r.length)return!1;for(var t=n.length,s=0;s<t;s++)if(!e(n[s],r[s]))return!1;return!0}}(s),u=1===o?function(e){var n;return{get:function(r){return n&&e(n.key,r)?n.value:ae},put:function(e,r){n={key:e,value:r}},getEntries:function(){return n?[n]:[]},clear:function(){n=void 0}}}(l):function(e,n){var r=[];function t(e){var t=r.findIndex((function(r){return n(e,r.key)}));if(t>-1){var s=r[t];return t>0&&(r.splice(t,1),r.unshift(s)),s.value}return ae}return{get:t,put:function(n,s){t(n)===ae&&(r.unshift({key:n,value:s}),r.length>e&&r.pop())},getEntries:function(){return r},clear:function(){r=[]}}}(o,l);function c(){var n=u.get(arguments);if(n===ae){if(n=e.apply(null,arguments),i){var r=u.getEntries().find((function(e){return i(e.value,n)}));r&&(n=r.value)}u.put(arguments,n)}return n}return c.clearCache=function(){return u.clear()},c}function le(e){for(var n=arguments.length,r=new Array(n>1?n-1:0),t=1;t<n;t++)r[t-1]=arguments[t];return function(){for(var n=arguments.length,t=new Array(n),s=0;s<n;s++)t[s]=arguments[s];var a,o=0,i={memoizeOptions:void 0},l=t.pop();if("object"===typeof l&&(i=l,l=t.pop()),"function"!==typeof l)throw new Error("createSelector expects an output function after the inputs, but received: ["+typeof l+"]");var u=i.memoizeOptions,c=void 0===u?r:u,f=Array.isArray(c)?c:[c],d=function(e){var n=Array.isArray(e[0])?e[0]:e;if(!n.every((function(e){return"function"===typeof e}))){var r=n.map((function(e){return"function"===typeof e?"function "+(e.name||"unnamed")+"()":typeof e})).join(", ");throw new Error("createSelector expects all input-selectors to be functions, but received the following types: ["+r+"]")}return n}(t),g=e.apply(void 0,[function(){return o++,l.apply(null,arguments)}].concat(f)),h=e((function(){for(var e=[],n=d.length,r=0;r<n;r++)e.push(d[r].apply(null,arguments));return a=g.apply(null,e)}));return Object.assign(h,{resultFunc:l,memoizedResultFunc:g,dependencies:d,lastResult:function(){return a},recomputations:function(){return o},resetRecomputations:function(){return o=0}}),h}}var ue=le(ie),ce=function(e){return e.usersPage.pageSize},fe=function(e){return e.usersPage.totalUsersCount},de=function(e){return e.usersPage.currentPage},ge=function(e){return e.usersPage.isFetching},he=function(e){return e.usersPage.followingInProgress},pe=function(e){return e.auth.isAuth},me=function(e){return e.usersPage.onlyFriends},ve=ue((function(e){return e.usersPage.users}),(function(e){return e})),Pe=function(e){(0,a.Z)(r,e);var n=(0,o.Z)(r);function r(e){var s;return(0,t.Z)(this,r),(s=n.call(this,e)).onChangeTermFunction=function(e){s.setState({onChangeTerm:e.currentTarget.value})},s.onChangeRangeLocal=function(e){s.setState({currentRangeLocal:s.state.currentRangeLocal+e})},s.SetTermFunction=function(){s.props.setTerm(s.state.onChangeTerm)},s.onPageChanged=function(e){var n=s.props,r=n.setCurrentPage,t=n.getUsersThunkCreator,a=n.pageSize,o=n.term,i=n.onlyFriends;r(e),t(e,a,o,i,0)},s.followAPI=function(e){s.props.followThunkCreator(e,s.props.currentPage,s.props.pageSize,s.props.term,s.props.onlyFriends)},s.unfollowAPI=function(e){s.props.unfollowThunkCreator(e,s.props.currentPage,s.props.pageSize,s.props.term,s.props.onlyFriends)},s.state={onChangeTerm:s.props.term,currentRangeLocal:1},s}return(0,s.Z)(r,[{key:"componentDidMount",value:function(){var e=this.props;(0,e.getUsersThunkCreator)(e.currentPage,e.pageSize,e.term,e.onlyFriends,0)}},{key:"componentDidUpdate",value:function(e,n){if(e.term!==this.props.term||e.onlyFriends!==this.props.onlyFriends){this.props.setCurrentPage(1),this.setState({currentRangeLocal:1});var r=this.props;(0,r.getUsersThunkCreator)(1,r.pageSize,r.term,r.onlyFriends,0)}}},{key:"render",value:function(){var e=this.props,n=e.isFetching,r=e.totalUsersCount,t=e.pageSize,s=e.currentPage,a=e.users,o=e.followingInProgress,i=e.isAuth;return(0,I.jsxs)(I.Fragment,{children:[" ",n&&(0,I.jsx)(se.Z,{}),(0,I.jsx)(te,{onPageChanged:this.onPageChanged,totalUsersCount:r,pageSize:t,currentPage:s,users:a,unfollowAPI:this.unfollowAPI,followAPI:this.followAPI,followingInProgress:o,isAuth:i,SetTermFunction:this.SetTermFunction,onChangeTerm:this.state.onChangeTerm,onChangeTermFunction:this.onChangeTermFunction,currentRangeLocal:this.state.currentRangeLocal,onChangeRangeLocal:this.onChangeRangeLocal,setOnlyFriends:this.props.setOnlyFriends,onlyFriends:this.props.onlyFriends,patch:this.props.patch,PageWidth:this.props.PageWidth})]})}}]),r}(i.Component),Ce=(0,l.$j)((function(e){return{users:ve(e),pageSize:ce(e),totalUsersCount:fe(e),currentPage:de(e),isFetching:ge(e),followingInProgress:he(e),isAuth:pe(e),term:e.usersPage.term,myId:e.auth.myId,onlyFriends:me(e),patch:e.app.patch,PageWidth:e.app.PageWidth}}),{setCurrentPage:u.D4,getUsersThunkCreator:u.Uk,followThunkCreator:u.AC,unfollowThunkCreator:u.Ow,setTerm:u.nS,setOnlyFriends:u.F3})(Pe)}}]);
//# sourceMappingURL=517.cf8b9df5.chunk.js.map