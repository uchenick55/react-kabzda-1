"use strict";(self.webpackChunkmy_app=self.webpackChunkmy_app||[]).push([[988],{3988:function(e,s,a){a.r(s),a.d(s,{default:function(){return Ye}});var n=a(1413),t=a(2791),i=a(8687),o=a(5870),c="msg2_sendSwg__6J6oT",r="msg2_messages2RenderMessages__FfCI7",d="msg2_MobileMessagesLeft__Fszg-",l="msg2_DesktopMessagesLeft__giM5b",m="msg2_dialog2Messages2Common__Jcsyr",g="msg2_Fixed__NTk8G",u="msg2_messages2NameAndProfileLink__KbS-k",_="msg2_messages2ChooseDialog__2IOAU",h="msg2_messages2PrintMessage__nJ37v",v="msg2_Msg2HeaderName__9TnNU",f="msg2_Msg2HeaderPhoto__E1A6y",x="msg2_Msg2HeaderActivityDate__ArIUd",p="msg2_myIdNotMyIdMsg2ComExt__d61Ae",M="msg2_myIdMessageExt__COEoZ",j="msg2_NOTmyIdMessageExt__korn+",N="msg2_myIdNotMyIdMsg2ComInt__0+N8k",b="msg2_myIdMessageInt__2zKFh",y="msg2_NOTmyIdMessageInt__Qcpgy",I="msg2_Msg2DropDownMenuExt__xiV4b",D="msg2_Msg2DropDownMenuIntCommon__Y7URR",C="msg2_Msg2DropDownMenuIntMy__SBdru",S="msg2_Msg2DropDownMenuIntNotMy__bG4Ug",k="msg2_Msg2DropDownItems__Y+1WI",w="msg2_positionRelative__bgY1G",A="msg2_DropdownItem__9NX+O",T="msg2_imgDelete__cCIhk",W="msg2_imgSpam__-zA3z",R="msg2_imgRestore__TGovD",Z="msg2_Msg2ItemAdedAtCommon__nO1kU",F="msg2_ColorMy__7rgTv",Y="msg2_ColorNotMy__y2cFM",E="msg2_Msg2DeletedText__Jvcj9",P="msg2_Msg2DeletedPic__lCgmi",H="msg2_Msg2SpamPic__JxWIA",L="msg2_Msg2Body__7HtbA",O="msg2_Msg2DateExt__ioNCS",U="msg2_Msg2DateInt__JjUdN",B=a(9439),J="dialog2Render_Fixed__yAlTJ",V="dialog2Render_dialog2ListCommon__ZMqFo",z="dialog2Render_MobileDialogWidth__ahAt-",q="dialog2Render_DesktopDialogWidth__zSxVR",G="dialog2Render_Dialog2ItemCardExt__LODJo",K="dialog2Render_Dialog2ItemCardInt__HQqPI",Q="dialog2Render_Dialog2ItemCardName__zSixE",$="dialog2Render_Dialog2ItemCardPhoto__jPmgw",X="dialog2Render_Dialog2ItemCardNewMsgCnt__TrWvv",ee="dialog2Render_Dialog2ItemCardMsgTime__2bCd+",se="dialog2Render_dialog2HeaderCommon__YO-4Y",ae="dialog2Render_Dialog2SearchInput__uF7Sy",ne="dialog2Render_MagnifyingGlass__VpERP",te=a(6110),ie=a(1087),oe=function(e){var s,a=new Date(e?new Date(e).getTime()+108e5:0),n=!!e&&(new Date).getFullYear()===a.getFullYear()&&(new Date).getMonth()===a.getMonth()&&(new Date).getDate()===a.getDate(),t=("0"+a.getFullYear()).substr(-4),i=a.getMonth(),o=("0"+a.getDate()).substr(-2),c=("0"+a.getHours()).substr(-2),r=("0"+a.getMinutes()).substr(-2),d=("0"+a.getSeconds()).substr(-2);switch(i){case 0:s="01";break;case 1:s="02";break;case 2:s="03";break;case 3:s="04";break;case 4:s="05";break;case 5:s="06";break;case 6:s="07";break;case 7:s="08";break;case 8:s="09";break;case 9:s="10";break;case 10:s="11";break;case 11:s="12";break;default:s=""}return{Year:t,Month:s,Day:o,Hour:c,Minutes:r,Seconds:d,isToday:n}},ce=a(184),re=(0,t.memo)((function(e){var s=e.userName,a=e.hasNewMessages,n=e.photosSmall,t=e.lastDialogActivityDate,i=e.newMessagesCount,o=e.id;console.log("Dialog2Item");var c=oe(t);return(0,ce.jsx)("div",{className:G,children:(0,ce.jsx)(ie.OL,{to:"/messages/"+o,children:(0,ce.jsxs)("div",{className:K,children:[(0,ce.jsx)("div",{className:Q,children:s}),"   ",a&&(0,ce.jsx)("div",{className:X,children:i})," ",(0,ce.jsx)("img",{src:n||te,className:$,alt:"CardPhoto"})," ",(0,ce.jsx)("div",{className:ee,children:c.isToday?(0,ce.jsxs)("span",{children:[" ",c.Hour,":",c.Minutes]}):(0,ce.jsxs)("span",{children:[" ",c.Day," ",c.Month," ",c.Year]})})]})})})}));var de=a.p+"static/media/magnifying-glass.3e5e2c21301cb96ebac59d5c181f8886.svg",le=(0,t.memo)((function(e){var s=e.SearchValue,a=e.setSearchValue;return console.log("\u043e\u0442\u0440\u0438\u0441\u043e\u0432\u043a\u0430 \u043f\u043e\u043b\u044f \u043f\u043e\u0438\u0441\u043a\u0430 \u0441\u0440\u0435\u0434\u0438 dialogs2"),(0,ce.jsxs)("div",{children:[(0,ce.jsx)("input",{placeholder:"\u041f\u043e\u0438\u0441\u043a",value:s,onChange:function(e){return a(e.target.value)},type:"text",className:ae}),(0,ce.jsx)("img",{src:de,className:ne,alt:"\u041f\u043e\u0438\u0441\u043a"})]})})),me=function(e){var s=e.pageWidth,a=e.mobileWidth,n=e.patch,i=e.dialog2All,o=(0,t.useState)(""),c=(0,B.Z)(o,2),r=c[0],d=c[1],l=i&&i.filter((function(e){return e.userName.toLowerCase().includes(r.toLowerCase())}));return(0,ce.jsx)("div",{children:("messages"===n&&s>a||"dialog2"===n)&&(0,ce.jsxs)("div",{children:[(0,ce.jsx)("div",{className:"".concat(J," ").concat(se," ").concat(s<a?z:q),children:(0,ce.jsx)(le,{SearchValue:r,setSearchValue:d})}),(0,ce.jsx)("div",{className:"".concat(J," ").concat(V," ").concat(s<a?z:q),children:l.map((function(e){var s=e.id,a=e.userName,n=e.hasNewMessages,t=e.lastDialogActivityDate,i=e.newMessagesCount,o=e.photos.small;return(0,ce.jsx)(re,{userName:a,hasNewMessages:n,photosSmall:o,lastDialogActivityDate:t,newMessagesCount:i,id:s},s)}))})]})})},ge=t.memo(me),ue=a(5705),_e=a(1724),he=a(3360);var ve=a.p+"static/media/send-svg2.fca4a68a54e7d25372f7430fe55f0653.svg",fe=a(3370),xe={newMessage:""},pe=_e.Ry({}),Me=function(e){var s=e.Msg2SendMessage,a=e.isMobile;console.log("\u043f\u043e\u043b\u0435 \u0432\u0432\u043e\u0434\u0430 \u043d\u043e\u0432\u044b\u0445 \u0441\u043e\u043e\u0431\u0449\u0435\u043d\u0438\u0439");return(0,ce.jsx)("div",{className:"".concat(g," ").concat(h," ").concat(a?d:l),children:(0,ce.jsx)(ue.J9,{initialValues:xe,validationSchema:pe,onSubmit:function(e,a){var n=a.resetForm;s(e.newMessage),n()},children:function(e){e.handleReset;var s=e.values;return(0,ce.jsx)(ue.l0,{children:(0,ce.jsxs)("div",{className:"d-flex d-inline-block justify-content-center align-items-center",children:[(0,ce.jsx)("div",{className:"col-9",children:(0,ce.jsx)(fe.t,{label:"",autoFocus:!1,name:"newMessage",type:"text",placeholder:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u0432\u0430\u0448\u0435 \u0441\u043e\u043e\u0431\u0449\u0435\u043d\u0438\u0435",leftLabelLength:""})}),(0,ce.jsx)(he.Z,{variant:"light",className:"mx-2",type:"submit",disabled:!s.newMessage,children:(0,ce.jsx)(fe.C,{src:ve,className:c,alt:"\u041e\u0442\u043f\u0440\u0430\u0432\u0438\u0442\u044c \u0441\u043e\u043e\u0431\u0449\u0435\u043d\u0438\u0435",title:"\u041e\u0442\u043f\u0440\u0430\u0432\u0438\u0442\u044c \u0441\u043e\u043e\u0431\u0449\u0435\u043d\u0438\u0435"})})]})})}})})},je=function(){console.log("\u043f\u043e\u043b\u0435 \u0432\u0432\u043e\u0434\u0430 \u043d\u043e\u0432\u044b\u0445 \u0441\u043e\u043e\u0431\u0449\u0435\u043d\u0438\u0439 - \u043a\u043e\u043d\u0442\u0435\u0439\u043d\u0435\u0440");var e=(0,i.I0)(),s=(0,i.v9)((function(e){return e.app.pageWidth}))<(0,i.v9)((function(e){return e.app.mobileWidth}));return(0,ce.jsx)(Me,{Msg2SendMessage:function(s){e((0,o.D9)(s,"2022-04-30T19:10:31.843"))},isMobile:s})},Ne=function(e){var s=e.d2Item,a=e.isMobile;console.log("\u0448\u0430\u043f\u043a\u0430 \u0441\u043e\u043e\u0431\u0449\u0435\u043d\u0438\u0439");var n=s&&s.photos&&s.photos.small?s.photos.small:te,t=oe(s&&s.lastUserActivityDate);return(0,ce.jsx)("div",{className:"".concat(g," ").concat(u," ").concat(a?d:l),children:s&&(0,ce.jsxs)("div",{children:[(0,ce.jsx)("div",{className:v,children:s&&s.userName}),(0,ce.jsx)(ie.OL,{to:"/profile/"+s.id,children:(0,ce.jsx)("img",{className:f,src:n,alt:"photoSrc"})}),(0,ce.jsxs)("div",{className:x,children:["\u0411\u044b\u043b(\u0430): "," ",s&&t.isToday?(0,ce.jsxs)("span",{children:[" \u0441\u0435\u0433\u043e\u0434\u043d\u044f \u0432 ",t.Hour,":",t.Minutes]}):(0,ce.jsxs)("span",{children:[" ",t.Day,".",t.Month,".",t.Year]})]})]})})},be=function(){console.log("\u0448\u0430\u043f\u043a\u0430 \u0441\u043e\u043e\u0431\u0449\u0435\u043d\u0438\u0439 - \u043a\u043e\u043d\u0442\u0435\u0439\u043d\u0435\u0440");var e=(0,i.v9)((function(e){return e.dialog2.d2Item})),s=(0,i.v9)((function(e){return e.app.pageWidth}))<(0,i.v9)((function(e){return e.app.mobileWidth}));return(0,ce.jsx)(Ne,{d2Item:e,isMobile:s})},ye=a(8789);var Ie=a.p+"static/media/dust-bin2.9f266211d62f71a82d41f9c57beb3d28.svg";var De=a.p+"static/media/spam1.c38e496626cdf8fb2aae68cddb1227de.svg";var Ce=a.p+"static/media/restore1.1c96ab0dd3d42ca07131c5eb6a164a47.svg",Se=(0,t.memo)((function(e){var s=e.id,a=e.isMyMessage,n=e.deletedBySender,t=e.isSpam,c=(0,i.I0)();return(0,ce.jsx)(ce.Fragment,{children:(0,ce.jsx)("div",{children:(0,ce.jsxs)(ye.Z,{children:[(0,ce.jsx)(ye.Z.Toggle,{className:"".concat(a?C:S," \n                         ").concat(D)}),(0,ce.jsxs)(ye.Z.Menu,{className:k,children:[!n&&(0,ce.jsxs)(ye.Z.Item,{className:w,eventKey:"1",onClick:function(){c((0,o.fv)(s))},children:[(0,ce.jsx)("div",{className:A,children:"\u0423\u0434\u0430\u043b\u0438\u0442\u044c \u0443 \u043c\u0435\u043d\u044f"}),(0,ce.jsx)("img",{src:Ie,className:T,alt:"\u0423\u0434\u0430\u043b\u0438\u0442\u044c \u0443 \u043c\u0435\u043d\u044f"})]}),!a&&!t&&(0,ce.jsxs)(ye.Z.Item,{className:w,eventKey:"2",onClick:function(){c((0,o.ho)(s))},children:[(0,ce.jsx)("div",{className:A,children:"\u0412 \u0441\u043f\u0430\u043c"}),(0,ce.jsx)("img",{src:De,className:W,alt:"\u0412 \u0441\u043f\u0430\u043c"})]}),(n||t)&&(0,ce.jsxs)(ye.Z.Item,{className:w,eventKey:"3",onClick:function(){c((0,o.HY)(s))},children:[(0,ce.jsx)("div",{className:A,children:"\u0412\u043e\u0441\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c"}),(0,ce.jsx)("img",{src:Ce,className:R,alt:"\u0412\u043e\u0441\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c"})]})]})]})})})})),ke=(0,t.memo)((function(e){var s=e.id,a=e.body,n=e.addedAt,i=e.senderId,o=e.myId,c=e.deletedBySender,r=e.isSpam,d=e.addedAtPrev,l=oe(n),m=oe(d),g=o===i,u=(0,t.useState)(""),_=(0,B.Z)(u,2),h=_[0],v=_[1];return(0,ce.jsxs)("div",{children:["".concat(l.Day,"-").concat(l.Month,"-").concat(l.Year)!=="".concat(m.Day,"-").concat(m.Month,"-").concat(m.Year)&&(0,ce.jsx)("div",{className:O,children:(0,ce.jsxs)("div",{className:U,children:[l.Day,".",l.Month,".",l.Year]})}),(0,ce.jsx)("div",{className:"".concat(p," ").concat(g?M:j),children:(0,ce.jsxs)("div",{className:"".concat(N," ").concat(g?b:y),onMouseOver:function(){v(s)},onMouseLeave:function(){v("")},children:[c?(0,ce.jsxs)("div",{children:[(0,ce.jsx)("img",{className:P,src:Ie,alt:""}),(0,ce.jsx)("div",{className:E,children:" \u044d\u0442\u043e \u0441\u043e\u043e\u0431\u0449\u0435\u043d\u0438\u0435 \u0443\u0434\u0430\u043b\u0435\u043d\u043e"})]}):(0,ce.jsx)("div",{className:L,children:a}),(0,ce.jsxs)("div",{className:"".concat(Z," ").concat(g?F:Y),children:[l.Hour,":",l.Minutes]}),r&&(0,ce.jsx)("img",{className:H,src:De,alt:""}),(0,ce.jsx)("div",{className:I,children:h===s&&(0,ce.jsx)(Se,{id:s,isMyMessage:g,deletedBySender:c,isSpam:r})})]})})]})})),we=function(e){var s=e.messagesNewerThen,a=e.myId,n=e.isMobile;return console.log("\u043e\u0442\u0440\u0438\u0441\u043e\u0432\u043a\u0430 \u0441\u043e\u043e\u0431\u0449\u0435\u043d\u0438\u0439"),(0,ce.jsxs)("div",{className:"".concat(g," ").concat(r," ").concat(n?d:l),children:[s.map((function(e,s,n){var t=e.id,i=e.body,o=e.addedAt,c=e.senderId,r=e.deletedBySender,d=e.isSpam,l=s>0?n[s-1].addedAt:"";return(0,ce.jsx)(ke,{id:t,body:i,addedAt:o,senderId:c,myId:a,deletedBySender:r,isSpam:d,addedAtPrev:l},t)})),(0,ce.jsx)("div",{className:"second-block"})]})},Ae=function(){console.log("\u043e\u0442\u0440\u0438\u0441\u043e\u0432\u043a\u0430 \u0441\u043e\u043e\u0431\u0449\u0435\u043d\u0438\u0439 - \u043a\u043e\u043d\u0442\u0435\u0439\u043d\u0435\u0440");var e=(0,i.v9)((function(e){return e.app.pageWidth})),s=(0,i.v9)((function(e){return e.app.mobileWidth})),a=(0,i.v9)((function(e){return e.dialog2.messagesNewerThen})),n=(0,i.v9)((function(e){return e.auth.myId})),t=e<s;return(0,ce.jsx)(we,{messagesNewerThen:a,myId:n,isMobile:t})},Te=function(){var e=(0,i.v9)((function(e){return e.app.patch})),s=(0,i.v9)((function(e){return e.app.pageWidth}))<(0,i.v9)((function(e){return e.app.mobileWidth})),a=(0,t.useMemo)((function(){return(0,ce.jsx)(be,{})}),[]),n=(0,t.useMemo)((function(){return(0,ce.jsx)(Ae,{})}),[]),o=(0,t.useMemo)((function(){return(0,ce.jsx)(je,{})}),[]);return(0,ce.jsxs)("div",{children:["dialog2"===e&&!s&&(0,ce.jsx)("div",{className:"".concat(g," ").concat(_),children:" \u0412\u044b\u0431\u0435\u0440\u0438\u0442\u0435 \u0434\u0438\u0430\u043b\u043e\u0433"}),"messages"===e&&(0,ce.jsxs)("div",{children:[a," ",n," ",o," "]})]})},We=function(e){var s=e.patch,a=e.pageWidth,n=e.mobileWidth,t=e.dialog2All;return(0,ce.jsxs)("div",{className:m,children:[(0,ce.jsx)(ge,{pageWidth:a,mobileWidth:n,patch:s,dialog2All:t}),(0,ce.jsx)(Te,{})," "]})},Re=a(7781),Ze=a(1852),Fe=a(3990),Ye=(0,Re.qC)(Ze.Z,Fe.Z)((function(e){var s=e.userId,a=(0,i.v9)((function(e){return e.dialog2.markers})),c=(0,i.v9)((function(e){return e.dialog2.d2Item})),r=(0,i.v9)((function(e){return e.dialog2.dialog2All})),d=(0,i.v9)((function(e){return e.app.patch})),l=(0,i.v9)((function(e){return e.app.pageWidth})),m=(0,i.v9)((function(e){return e.app.mobileWidth})),g=(0,i.v9)((function(e){return e.dialog2.listUniqueDialog2Id})),u=o.PN.setMarkers,_=(0,i.I0)(),h=document.querySelector(".second-block"),v=(0,t.useCallback)((function(){h&&h.scrollIntoView(!0)}),[h]);return(0,t.useEffect)((function(){"dialog2"===d&&_((0,o.sz)())}),[d,_]),(0,t.useEffect)((function(){0!==s&&(g.includes(s)?_(o.PN.setD2Item(r.filter((function(e){return e.id===s}))[0])):(console.log("\u043d\u0430\u0447\u0430\u0442\u044c \u0434\u0438\u0430\u043b\u043e\u0433 \u043f\u043e \u043d\u0435\u043f\u0443\u0441\u0442\u043e\u043c\u0443 userId "),_((0,o.H3)(s))))}),[s]),(0,t.useEffect)((function(){(null===c||void 0===c?void 0:c.id)===s&&(console.log("\u043f\u0440\u0438 \u0441\u043c\u0435\u043d\u0435 d2Item \u0437\u0430\u0433\u0440\u0443\u0436\u0430\u0435\u043c \u0441\u043f\u0438\u0441\u043e\u043a \u0441\u043e\u043e\u0431\u0449\u0435\u043d\u0438\u0439 (\u043f\u043e\u043a\u0430 \u0432\u0441\u0435, \u043f\u043e\u0441\u043b\u0435 - \u0437\u0430\u0433\u0440\u0443\u0437\u043a\u0430 \u043f\u043e\u0440\u0446\u0438\u044f\u043c\u0438)"),_((0,o.vu)(s,"2019-04-30T19:10:31.843")))}),[c,s,_]),(0,t.useEffect)((function(){a.needToScrollBottom&&(v(),_(u((0,n.Z)((0,n.Z)({},a),{},{needToScrollBottom:!1}))))}),[v,a,u,_]),(0,ce.jsx)("div",{children:(0,ce.jsx)(We,{patch:d,pageWidth:l,mobileWidth:m,dialog2All:(0,t.useMemo)((function(){return r}),[r])})})}))},3990:function(e,s,a){var n=a(1413),t=(a(2791),a(8687)),i=a(7689),o=a(184),c=function(e){return{isAuth:e.auth.isAuth}};s.Z=function(e){return(0,t.$j)(c,null)((function(s){return s.isAuth?(0,o.jsx)(e,(0,n.Z)({},s)):(0,o.jsx)(i.Fg,{to:"../login"})}))}},1852:function(e,s,a){var n=a(1413),t=(a(2791),a(7689)),i=a(8687),o=a(184);s.Z=function(e){return(0,i.$j)(null,null)((function(s){var a={params:(0,t.UO)()},i=Number(a.params["*"]);return(0,o.jsx)(e,(0,n.Z)((0,n.Z)({},s),{},{userId:i}))}))}}}]);
//# sourceMappingURL=988.0cde1124.chunk.js.map