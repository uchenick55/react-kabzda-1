"use strict";(self.webpackChunkmy_app=self.webpackChunkmy_app||[]).push([[378],{378:function(e,t,n){n.r(t),n.d(t,{default:function(){return H}});var a=n(2791),s=n(9439),r=n(8687),c=n(3347),i=n(5705),o=n(1724),u=n(6670),l=n(3360),h=n(4266),d=n(184),f={newMessage:""},v=o.Ry({}),m=function(e){var t=e.sendMessage,n=e.channelStatus;return(0,d.jsx)(d.Fragment,{children:(0,d.jsx)(i.J9,{initialValues:f,validationSchema:v,onSubmit:function(e,n){var a=n.resetForm;t(e.newMessage),a()},children:function(e){var t=e.values;return(0,d.jsxs)(i.l0,{children:[(0,d.jsxs)("div",{children:[(0,d.jsx)(u.rZ,{label:"\u041d\u043e\u0432\u043e\u0435 \u0441\u043e\u043e\u0431\u0449\u0435\u043d\u0438\u0435",autoFocus:!1,name:"newMessage",type:"text",placeholder:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u0432\u0430\u0448\u0435 \u0441\u043e\u043e\u0431\u0449\u0435\u043d\u0438\u0435",leftLabelLength:"",isDisabled:"ready"!==n}),(0,d.jsx)(h.Z,{direction:"vertical",gap:1,className:"mt-2",children:(0,d.jsx)(l.Z,{disabled:"ready"!==n||0===t.newMessage.length,type:"submit",children:"Submit"})})]}),(0,d.jsx)("div",{})]})}})})},x=n(7855),g=(0,a.memo)((function(){var e=(0,a.useState)(!1),t=(0,s.Z)(e,2),n=t[0],c=t[1],i=(0,a.useState)(!1),o=(0,s.Z)(i,2),u=o[0],l=o[1],h=(0,r.v9)((function(e){return e.chat.messages})),f=(0,a.useRef)(null);(0,a.useEffect)((function(){var e=f.current,t=e.scrollHeight,n=e.offsetHeight;t<=e.scrollTop+n+300&&c(!0),!u&&h.length>0&&(c(!0),l(!0))}),[h]);return(0,a.useEffect)((function(){!0===n&&function(){var e,t=f.current.scrollHeight;null===(e=f.current)||void 0===e||e.scrollTo({top:t,behavior:"smooth"}),c(!1)}()}),[n]),(0,d.jsx)("div",{ref:f,style:{height:"15rem",overflowY:"auto"},children:h.map((function(e,t){return(0,d.jsx)(j,{message:e},t)}))})})),j=(0,a.memo)((function(e){var t=e.message;return(0,d.jsx)("div",{children:(0,d.jsxs)("div",{children:[(0,d.jsx)("img",{src:t.photo,alt:"avatar",style:{height:"30px"}}),(0,d.jsx)("b",{children:t.userName})," ",t.message,(0,d.jsx)("hr",{})]})})})),p=function(){var e=(0,r.v9)((function(e){return e.chat.channelStatus})),t=(0,r.I0)();return(0,d.jsx)(m,{sendMessage:function(e){e&&t((0,c.rR)(e))},channelStatus:e})},_=(0,a.memo)((function(){var e=c.ON.switchRenderChat,t=c.ON.setChatInitialState,n=(0,r.v9)((function(e){return e.theme.themeBLL})),s=(0,r.I0)();return(0,a.useEffect)((function(){return s((0,c.WE)()),function(){s((0,c.R7)()),s(t())}}),[]),(0,d.jsxs)(x.Z,{bg:n,onClose:function(){return s(e())},children:[(0,d.jsx)(x.Z.Header,{children:(0,d.jsx)("strong",{className:"me-auto",children:"\u041e\u0431\u0449\u0438\u0439 \u0447\u0430\u0442"})}),(0,d.jsxs)(x.Z.Body,{children:[(0,d.jsx)(g,{})," ",(0,d.jsx)(p,{})," "]})]})})),b=n(7781),Z=n(3990),k="chat_chatBookmarkExtCommon__uXZD1",C="chat_chatBookmarkExt__Lsg1w",N="chat_hideChatBookmarkExt__KUute",y="chat_chatBookmark__H4JDn",w="chat_imgDialog__qsty6",E="chat_ChatCommon__XiwNc",S="chat_MakeChatVisible__Cf2Xj",B="chat_MakeChatInvisible__cZ24Q";var M=n.p+"static/media/dialog-black.58ab178e86bc68d0b3914e5972d809b0.svg";var L=n.p+"static/media/dialog-light.41903a6d132ae6aee8e10dd798d9b5e0.svg",R=(0,a.memo)((function(){var e=(0,r.I0)(),t=c.ON.switchRenderChat,n=(0,r.v9)((function(e){return e.theme.themeBLL}));return(0,d.jsx)("div",{children:(0,d.jsxs)("div",{onClick:function(){return e(t())},children:[(0,d.jsx)("div",{className:y,children:(0,d.jsx)(x.Z,{bg:n,children:(0,d.jsx)(x.Z.Body,{children:(0,d.jsx)("strong",{className:"me-auto",children:"\u041e\u0431\u0449\u0438\u0439 \u0447\u0430\u0442"})})})}),(0,d.jsx)("img",{src:"light"===n?M:L,alt:"\u0417\u0430\u0434\u0430\u0442\u044c \u0432\u043e\u043f\u0440\u043e\u0441",title:"\u0417\u0430\u0434\u0430\u0442\u044c \u0432\u043e\u043f\u0440\u043e\u0441",className:w})]})})})),H=(0,b.qC)(Z.Z)((function(){var e=(0,r.v9)((function(e){return e.chat.renderChat}));return(0,d.jsxs)("div",{children:[(0,d.jsxs)("div",{className:"".concat(k," ").concat(e?N:C),children:[(0,d.jsx)(R,{}),"  "]}),(0,d.jsx)("div",{className:"".concat(E," ").concat(e?S:B),children:(0,d.jsx)(_,{})})]})}))},3990:function(e,t,n){var a=n(1413),s=(n(2791),n(8687)),r=n(7689),c=n(184),i=function(e){return{isAuth:e.auth.isAuth}};t.Z=function(e){return(0,s.$j)(i,null)((function(t){return t.isAuth?(0,c.jsx)(e,(0,a.Z)({},t)):(0,c.jsx)(r.Fg,{to:"../login"})}))}},4266:function(e,t,n){n.d(t,{Z:function(){return m}});var a=n(3433),s=n(1413),r=n(5987),c=n(1694),i=n.n(c),o=n(2791),u=n(162),l=n(9439);function h(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:u.Hz,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:u.cs,a=[];return Object.entries(e).forEach((function(e){var s=(0,l.Z)(e,2),r=s[0],c=s[1];null!=c&&("object"===typeof c?t.forEach((function(e){var t=c[e];if(null!=t){var s=e!==n?"-".concat(e):"";a.push("".concat(r).concat(s,"-").concat(t))}})):a.push("".concat(r,"-").concat(c)))})),a}var d=n(184),f=["as","bsPrefix","className","direction","gap"],v=o.forwardRef((function(e,t){var n=e.as,c=void 0===n?"div":n,o=e.bsPrefix,l=e.className,v=e.direction,m=e.gap,x=(0,r.Z)(e,f);o=(0,u.vE)(o,"horizontal"===v?"hstack":"vstack");var g=(0,u.pi)(),j=(0,u.zG)();return(0,d.jsx)(c,(0,s.Z)((0,s.Z)({},x),{},{ref:t,className:i().apply(void 0,[l,o].concat((0,a.Z)(h({gap:m},g,j))))}))}));v.displayName="Stack";var m=v}}]);
//# sourceMappingURL=378.fd9fdc7c.chunk.js.map