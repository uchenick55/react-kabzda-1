"use strict";(self.webpackChunkmy_app=self.webpackChunkmy_app||[]).push([[138],{2138:function(e,n,r){r.r(n),r.d(n,{default:function(){return Ae}});var t=r(5671),a=r(3144),s=r(136),o=r(7277),i=r(2791),c=r(8687),l=r(5732),u=r(9439),d={userPhoto:"Users_userPhoto__5FOrl",preloader:"Users_preloader__eYvOq",textHeight:"Users_textHeight__B7Plu",line:"Users_line__EXs9E",myAlignCenter:"Users_myAlignCenter__6T2dh",favImage:"Users_favImage__Fih2I",myCol:"Users_myCol__c9t1g",myImg:"Users_myImg__dQ1cN",myCard:"Users_myCard__CAJcm"},f=r(6110);var h=r.p+"static/media/dialog-svgrepo-com.299239adca60e0536c40a6aea5f6fee4.svg";var m=r.p+"static/media/star-.0741470d42a207292c915853e443c7c4.svg";var g=r.p+"static/media/star+.8f12c1f646656dcb9d3b823059f13349.svg",p=r(1087),v=(r(7632),r(1413)),x=r(5987),y=r(1694),C=r.n(y),j=r(162),P=r(6445),Z=r(184),N=["active","disabled","className","style","activeLabel","children"],b=["children"],F=i.forwardRef((function(e,n){var r=e.active,t=e.disabled,a=e.className,s=e.style,o=e.activeLabel,i=e.children,c=(0,x.Z)(e,N),l=r||t?"span":P.Z;return(0,Z.jsx)("li",{ref:n,style:s,className:C()(a,"page-item",{active:r,disabled:t}),children:(0,Z.jsxs)(l,(0,v.Z)((0,v.Z)({className:"page-link"},c),{},{children:[i,r&&o&&(0,Z.jsx)("span",{className:"visually-hidden",children:o})]}))})}));F.defaultProps={active:!1,disabled:!1,activeLabel:"(current)"},F.displayName="PageItem";var w=F;function T(e,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:e,t=i.forwardRef((function(e,t){var a=e.children,s=(0,x.Z)(e,b);return(0,Z.jsxs)(F,(0,v.Z)((0,v.Z)({},s),{},{ref:t,children:[(0,Z.jsx)("span",{"aria-hidden":"true",children:a||n}),(0,Z.jsx)("span",{className:"visually-hidden",children:r})]}))}));return t.displayName=e,t}var k=T("First","\xab"),I=T("Prev","\u2039","Previous"),_=T("Ellipsis","\u2026","More"),S=T("Next","\u203a"),A=T("Last","\xbb"),U=["bsPrefix","className","size"],R=i.forwardRef((function(e,n){var r=e.bsPrefix,t=e.className,a=e.size,s=(0,x.Z)(e,U),o=(0,j.vE)(r,"pagination");return(0,Z.jsx)("ul",(0,v.Z)((0,v.Z)({ref:n},s),{},{className:C()(t,o,a&&"".concat(o,"-").concat(a))}))}));R.displayName="Pagination";var L=Object.assign(R,{First:k,Prev:I,Ellipsis:_,Item:w,Next:S,Last:A}),z="Pagination_pagination__utrCy",O=function(e){for(var n=e.totalUsersCount,r=e.pageSize,t=e.currentPage,a=e.onPageChanged,s=e.PortionSize,o=void 0===s?6:s,i=e.currentRangeLocal,c=e.onChangeRangeLocal,l=Math.ceil(n/r),u=[],d=1;d<=l;d++)u.push(d);var f=1+o*(i-1),h=o*i,m=u.filter((function(e){return e>=f&&e<=h})),g=function(e){"prevPortion"===e&&i>1&&c(-1),"nextPortion"===e&&c(1)},p=m.map((function(e){return(0,Z.jsxs)(L.Item,{active:e===t,onClick:function(){a(e)},children:[e," "]},e)}));return(0,Z.jsx)("div",{className:z,children:(0,Z.jsxs)(L,{className:"pagination align-items-center justify-content-center",children:[" ",(0,Z.jsx)(L.Prev,{onClick:function(){g("prevPortion")}})," ",p," ",(0,Z.jsx)(L.Next,{onClick:function(){g("nextPortion")}}),"  "]})})},E=r(4266),M=r(5313),H=r(3360),B=r(9410),D=r(2592),q=function(e){var n=e.onChangeTerm,r=e.onChangeTermFunction,t=e.SetTermFunction,a=e.handleClick,s=e.setOnlyFriends,o=e.onlyFriends;return(0,Z.jsx)("div",{children:(0,Z.jsx)(M.Z,{children:(0,Z.jsxs)(E.Z,{direction:"horizontal",gap:3,className:"mx-1",children:[(0,Z.jsxs)(B.Z,{children:[(0,Z.jsx)(B.Z.Text,{children:(0,Z.jsx)(D.Z,{fluid:!0,src:g,className:d.favImage})}),(0,Z.jsx)(B.Z.Checkbox,{checked:o,onChange:function(e){s(e.currentTarget.checked)}}),(0,Z.jsx)(M.Z.Control,{type:"text",value:n,onChange:function(e){r(e)},onBlur:t,placeholder:"find users..."})," "]}),(0,Z.jsx)("div",{className:"vr"})," ",(0,Z.jsx)(H.Z,{onClick:a,type:"submit",children:"Find"})]})})})},W=r(6543),Y=r(7472),J=["bsPrefix","className","variant","as"],Q=i.forwardRef((function(e,n){var r=e.bsPrefix,t=e.className,a=e.variant,s=e.as,o=void 0===s?"img":s,i=(0,x.Z)(e,J),c=(0,j.vE)(r,"card-img");return(0,Z.jsx)(o,(0,v.Z)({ref:n,className:C()(a?"".concat(c,"-").concat(a):c,t)},i))}));Q.displayName="CardImg";var X=Q,$=r(6040),G=["bsPrefix","className","as"],K=i.forwardRef((function(e,n){var r=e.bsPrefix,t=e.className,a=e.as,s=void 0===a?"div":a,o=(0,x.Z)(e,G),c=(0,j.vE)(r,"card-header"),l=(0,i.useMemo)((function(){return{cardHeaderBsPrefix:c}}),[c]);return(0,Z.jsx)($.Z.Provider,{value:l,children:(0,Z.jsx)(s,(0,v.Z)((0,v.Z)({ref:n},o),{},{className:C()(t,c)}))})}));K.displayName="CardHeader";var V=K,ee=["bsPrefix","className","bg","text","border","body","children","as"],ne=(0,Y.Z)("h5"),re=(0,Y.Z)("h6"),te=(0,W.Z)("card-body"),ae=(0,W.Z)("card-title",{Component:ne}),se=(0,W.Z)("card-subtitle",{Component:re}),oe=(0,W.Z)("card-link",{Component:"a"}),ie=(0,W.Z)("card-text",{Component:"p"}),ce=(0,W.Z)("card-footer"),le=(0,W.Z)("card-img-overlay"),ue=i.forwardRef((function(e,n){var r=e.bsPrefix,t=e.className,a=e.bg,s=e.text,o=e.border,i=e.body,c=e.children,l=e.as,u=void 0===l?"div":l,d=(0,x.Z)(e,ee),f=(0,j.vE)(r,"card");return(0,Z.jsx)(u,(0,v.Z)((0,v.Z)({ref:n},d),{},{className:C()(t,f,a&&"bg-".concat(a),s&&"text-".concat(s),o&&"border-".concat(o)),children:i?(0,Z.jsx)(te,{children:c}):c}))}));ue.displayName="Card",ue.defaultProps={body:!1};var de=Object.assign(ue,{Img:X,Title:ae,Subtitle:se,Body:te,Link:oe,Text:ie,Header:V,Footer:ce,ImgOverlay:le}),fe=r(7022),he=r(9743),me=r(9603),ge=r(2677),pe=function(e){var n=e.totalUsersCount,r=e.pageSize,t=e.currentPage,a=e.onPageChanged,s=e.users,o=e.followingInProgress,c=e.unfollowAPI,l=e.isAuth,v=e.followAPI,x=e.SetTermFunction,y=e.onChangeTerm,C=e.onChangeTermFunction,j=e.onChangeRangeLocal,P=e.currentRangeLocal,N=(e.myId,e.setOnlyFriends),b=e.onlyFriends,F=(0,i.useState)(""),w=(0,u.Z)(F,2),T=w[0],k=w[1];if(T)return T.message;try{var I=function(e){var n=e.u,r=e.followUnfollowAPICallback,t=(e.buttonText,o.some((function(e){return e===n.id})));return(0,Z.jsx)("span",{children:(0,Z.jsx)(D.Z,{className:d.myImg,fluid:!0,src:n.followed?g:m,alt:"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u0432 \u0438\u0437\u0431\u0440\u0430\u043d\u043d\u043e\u0435",title:"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u0432 \u0438\u0437\u0431\u0440\u0430\u043d\u043d\u043e\u0435",onClick:function(){t||(l?r(n.id):alert("You are not authorized, please Login"))}})})},_=s.map((function(e){return(0,Z.jsxs)("div",{className:"my-2 col-12 col-sm-5 col-lg-2 d-inline-block",children:[" ",(0,Z.jsx)(de,{className:d.myCard,children:(0,Z.jsxs)(de.Body,{children:[(0,Z.jsx)(de.Title,{className:"".concat(me.Z.textMaxWidthCommon," ").concat(me.Z.textMaxWidth8rem),children:e.name}),(0,Z.jsxs)(he.Z,{className:d.myRow,children:[(0,Z.jsx)(ge.Z,{className:d.myCol,children:(0,Z.jsxs)(p.OL,{to:"/profile/"+e.id,children:[" ",(0,Z.jsx)(D.Z,{fluid:!0,variant:"top",className:d.userPhoto,src:null!==e.photos.small?e.photos.small:f,alt:"\u041f\u0435\u0440\u0435\u0439\u0442\u0438 \u0432 \u043f\u0440\u043e\u0444\u0438\u043b\u044c",title:"\u041f\u0435\u0440\u0435\u0439\u0442\u0438 \u0432 \u043f\u0440\u043e\u0444\u0438\u043b\u044c"})," "]})}),(0,Z.jsx)(ge.Z,{className:d.myCol,children:(0,Z.jsx)(p.OL,{to:"/dialogs/"+e.id,children:(0,Z.jsx)(D.Z,{fluid:!0,src:h,alt:"\u041d\u0430\u0447\u0430\u0442\u044c \u0434\u0438\u0430\u043b\u043e\u0433",title:"\u041d\u0430\u0447\u0430\u0442\u044c \u0434\u0438\u0430\u043b\u043e\u0433",className:d.myImg})})}),(0,Z.jsx)(ge.Z,{className:d.myCol,children:(0,Z.jsx)("div",{children:e.followed?(0,Z.jsx)(I,{u:e,followUnfollowAPICallback:c,buttonText:"Remove"}):(0,Z.jsx)(I,{u:e,followUnfollowAPICallback:v,buttonText:"Add"})})})]}),(0,Z.jsx)(he.Z,{className:"".concat(me.Z.textMaxWidthCommon," ").concat(me.Z.textMaxWidth8rem),children:e.status&&(0,Z.jsx)("div",{children:e.status})})]})})]},e.id)})),S=(0,Z.jsx)(O,{totalUsersCount:n,pageSize:r,currentPage:t,onPageChanged:a,currentRangeLocal:P,onChangeRangeLocal:j});return(0,Z.jsx)("div",{children:(0,Z.jsxs)(fe.Z,{fluid:!0,className:"d-block justify-content-center",children:[(0,Z.jsx)("h2",{className:me.Z.pageHeader,children:"Users"}),(0,Z.jsxs)(he.Z,{children:[S,(0,Z.jsx)(q,{onChangeTerm:y,onChangeTermFunction:C,SetTermFunction:x,handleClick:function(e){e.preventDefault(),x()},setOnlyFriends:N,onlyFriends:b})]}),(0,Z.jsxs)(he.Z,{children:[(0,Z.jsxs)("div",{className:"d-flex justify-content-center opacity-50 mt-2 ",children:[" Total: ",n]}),(0,Z.jsx)("div",{className:d.line})]}),(0,Z.jsxs)(he.Z,{children:[_," "]}),(0,Z.jsx)(he.Z,{className:"mt-3",children:S})]})})}catch(T){k(T)}},ve=r(8570),xe="NOT_FOUND";var ye=function(e,n){return e===n};function Ce(e,n){var r="object"===typeof n?n:{equalityCheck:n},t=r.equalityCheck,a=void 0===t?ye:t,s=r.maxSize,o=void 0===s?1:s,i=r.resultEqualityCheck,c=function(e){return function(n,r){if(null===n||null===r||n.length!==r.length)return!1;for(var t=n.length,a=0;a<t;a++)if(!e(n[a],r[a]))return!1;return!0}}(a),l=1===o?function(e){var n;return{get:function(r){return n&&e(n.key,r)?n.value:xe},put:function(e,r){n={key:e,value:r}},getEntries:function(){return n?[n]:[]},clear:function(){n=void 0}}}(c):function(e,n){var r=[];function t(e){var t=r.findIndex((function(r){return n(e,r.key)}));if(t>-1){var a=r[t];return t>0&&(r.splice(t,1),r.unshift(a)),a.value}return xe}return{get:t,put:function(n,a){t(n)===xe&&(r.unshift({key:n,value:a}),r.length>e&&r.pop())},getEntries:function(){return r},clear:function(){r=[]}}}(o,c);function u(){var n=l.get(arguments);if(n===xe){if(n=e.apply(null,arguments),i){var r=l.getEntries().find((function(e){return i(e.value,n)}));r&&(n=r.value)}l.put(arguments,n)}return n}return u.clearCache=function(){return l.clear()},u}function je(e){for(var n=arguments.length,r=new Array(n>1?n-1:0),t=1;t<n;t++)r[t-1]=arguments[t];return function(){for(var n=arguments.length,t=new Array(n),a=0;a<n;a++)t[a]=arguments[a];var s,o=0,i={memoizeOptions:void 0},c=t.pop();if("object"===typeof c&&(i=c,c=t.pop()),"function"!==typeof c)throw new Error("createSelector expects an output function after the inputs, but received: ["+typeof c+"]");var l=i.memoizeOptions,u=void 0===l?r:l,d=Array.isArray(u)?u:[u],f=function(e){var n=Array.isArray(e[0])?e[0]:e;if(!n.every((function(e){return"function"===typeof e}))){var r=n.map((function(e){return"function"===typeof e?"function "+(e.name||"unnamed")+"()":typeof e})).join(", ");throw new Error("createSelector expects all input-selectors to be functions, but received the following types: ["+r+"]")}return n}(t),h=e.apply(void 0,[function(){return o++,c.apply(null,arguments)}].concat(d)),m=e((function(){for(var e=[],n=f.length,r=0;r<n;r++)e.push(f[r].apply(null,arguments));return s=h.apply(null,e)}));return Object.assign(m,{resultFunc:c,memoizedResultFunc:h,dependencies:f,lastResult:function(){return s},recomputations:function(){return o},resetRecomputations:function(){return o=0}}),m}}var Pe=je(Ce),Ze=function(e){return e.usersPage.pageSize},Ne=function(e){return e.usersPage.totalUsersCount},be=function(e){return e.usersPage.currentPage},Fe=function(e){return e.usersPage.isFetching},we=function(e){return e.usersPage.followingInProgress},Te=function(e){return e.auth.isAuth},ke=function(e){return e.usersPage.onlyFriends},Ie=Pe((function(e){return e.usersPage.users}),(function(e){return e})),_e=function(e){(0,s.Z)(r,e);var n=(0,o.Z)(r);function r(e){var a;return(0,t.Z)(this,r),(a=n.call(this,e)).onChangeTermFunction=function(e){a.setState({onChangeTerm:e.currentTarget.value})},a.onChangeRangeLocal=function(e){a.setState({currentRangeLocal:a.state.currentRangeLocal+e})},a.SetTermFunction=function(){a.props.setTerm(a.state.onChangeTerm)},a.onPageChanged=function(e){var n=a.props,r=n.setCurrentPage,t=n.getUsersThunkCreator,s=n.pageSize,o=n.term,i=n.onlyFriends;r(e),t(e,s,o,i,0)},a.followAPI=function(e){a.props.followThunkCreator(e,a.props.currentPage,a.props.pageSize,a.props.term,a.props.onlyFriends)},a.unfollowAPI=function(e){a.props.unfollowThunkCreator(e,a.props.currentPage,a.props.pageSize,a.props.term,a.props.onlyFriends)},a.state={onChangeTerm:a.props.term,currentRangeLocal:1},a}return(0,a.Z)(r,[{key:"componentDidMount",value:function(){var e=this.props;(0,e.getUsersThunkCreator)(e.currentPage,e.pageSize,e.term,e.onlyFriends,0)}},{key:"componentDidUpdate",value:function(e,n){if(e.term!==this.props.term||e.onlyFriends!==this.props.onlyFriends){this.props.setCurrentPage(1),this.setState({currentRangeLocal:1});var r=this.props;(0,r.getUsersThunkCreator)(1,r.pageSize,r.term,r.onlyFriends,0)}}},{key:"render",value:function(){var e=this.props,n=e.isFetching,r=e.totalUsersCount,t=e.pageSize,a=e.currentPage,s=e.users,o=e.followingInProgress,i=e.isAuth;return(0,Z.jsxs)(Z.Fragment,{children:[" ",n&&(0,Z.jsx)(ve.Z,{}),(0,Z.jsx)(pe,{onPageChanged:this.onPageChanged,totalUsersCount:r,pageSize:t,currentPage:a,users:s,unfollowAPI:this.unfollowAPI,followAPI:this.followAPI,followingInProgress:o,isAuth:i,SetTermFunction:this.SetTermFunction,onChangeTerm:this.state.onChangeTerm,onChangeTermFunction:this.onChangeTermFunction,currentRangeLocal:this.state.currentRangeLocal,onChangeRangeLocal:this.onChangeRangeLocal,myId:this.props.myId,setOnlyFriends:this.props.setOnlyFriends,onlyFriends:this.props.onlyFriends})]})}}]),r}(i.Component),Se=(0,c.$j)((function(e){return{users:Ie(e),pageSize:Ze(e),totalUsersCount:Ne(e),currentPage:be(e),isFetching:Fe(e),followingInProgress:we(e),isAuth:Te(e),term:e.usersPage.term,myId:e.auth.myId,onlyFriends:ke(e)}}),{setCurrentPage:l.D4,getUsersThunkCreator:l.Uk,followThunkCreator:l.AC,unfollowThunkCreator:l.Ow,setTerm:l.nS,setOnlyFriends:l.F3})(_e),Ae=function(){return(0,Z.jsx)(Se,{})}}}]);
//# sourceMappingURL=138.c02a8bbe.chunk.js.map