"use strict";(self.webpackChunkmy_app=self.webpackChunkmy_app||[]).push([[569],{8979:function(e,s,a){a(2791);s.Z=a.p+"static/media/send-svg2.12d8e771d6d27bcd4485de69966afd04.svg"},1569:function(e,s,a){a.r(s),a.d(s,{default:function(){return de}});var t=a(1413),r=a(2791),i=a(8687),l=a(5870),o="dialog2Messages2COM_dialog2Messages2Common__yrugD",d="dialog2Render_Fixed__yAlTJ",n="dialog2Render_dialog2HeaderCommon__YO-4Y",c="dialog2Render_dialog2ListCommon__ZMqFo",g="dialog2Render_MobileDialogWidth__ahAt-",h="dialog2Render_DesktopDialogWidth__zSxVR",m="dialog2Render_Dialog2ItemCardExt__LODJo",u="dialog2Render_Dialog2ItemCardInt__HQqPI",M="dialog2Render_Dialog2ItemCardName__zSixE",x="dialog2Render_Dialog2ItemCardId__A8R-f",_="dialog2Render_Dialog2ItemCardPhoto__jPmgw",p="dialog2Render_Dialog2ItemCardNewMsgCnt__TrWvv",D="dialog2Render_Dialog2ItemCardMsgTime__2bCd+",v=a(6110),f=a(1087),j=a(184),I=function(e){var s=e.userName,a=e.hasNewMessages,t=e.photos,r=e.lastDialogActivityDate,i=e.newMessagesCount,l=e.id;return(0,j.jsx)("div",{className:m,children:(0,j.jsx)(f.OL,{to:"/messages/"+l,children:(0,j.jsxs)("div",{className:u,children:[(0,j.jsx)("div",{className:M,children:s}),"   ",(0,j.jsx)("div",{className:x,children:l}),"   ",a&&(0,j.jsx)("div",{className:p,children:i})," ",(0,j.jsx)("img",{src:t.small?t.small:v,className:_,alt:"CardPhoto"})," ",(0,j.jsx)("div",{className:D,children:r.slice(11,16)})]})})})},N=r.memo(I),T=function(e){var s=e.PageWidth,a=e.MobileWidth,t=e.patch,r=e.Dialog2All,i=[];return(0,j.jsx)("div",{children:("messages"===t&&s>a||"dialog2"===t)&&(0,j.jsxs)("div",{children:[(0,j.jsx)("div",{className:"".concat(d," ").concat(n," ").concat(s<a?g:h),children:" \u043f\u043e\u0438\u0441\u043a, \u0431\u0435\u0437 \u043a\u043d\u043e\u043f\u043a\u0438 \u043e\u0442\u043f\u0440\u0430\u0432\u0438\u0442\u044c, \u0441 \u0437\u0430\u0434\u0435\u0440\u0436\u043a\u043e\u0439 \u043f\u043e\u0441\u043b\u0435 \u0432\u0432\u043e\u0434\u0430."}),(0,j.jsx)("div",{className:"".concat(d," ").concat(c," ").concat(s<a?g:h),children:r.map((function(e){var s=e.id,a=e.userName,t=e.hasNewMessages,r=e.lastDialogActivityDate,l=e.newMessagesCount,o=e.photos;return i.includes(s)?(0,j.jsx)("div",{}):(i.push(s),(0,j.jsx)(N,{userName:a,hasNewMessages:t,photos:o,lastDialogActivityDate:r,newMessagesCount:l,id:s},s))}))})]})})},C=r.memo(T),b="messages2Render_Fixed__baHQ8",A="messages2Render_messages2NameAndProfileLink__gsVN6",w="messages2Render_messages2ChooseDialog__JKbif",Z="messages2Render_messages2RenderMessages__Ebe0U",R="messages2Render_messages2PrintMessage__dhozP",S="messages2Render_MobileMessagesLeft__6JOQ+",W="messages2Render_DesktopMessagesLeft__rsM5T",k="messages2Render_Msg2HeaderName__Mw++x",y="messages2Render_Msg2Headerid__UXsSw",P="messages2Render_Msg2HeaderPhoto__XGI9W",U="messages2Render_Msg2HeaderActivityDate__ZWTOr",F=function(e){var s=e.id,a=e.body,t=e.Msg2DeleteMessage,r=(e.addedAt,e.senderId,e.senderName,e.recipientId);e.recipientName,e.viewed;return console.log("Messages2Item"),(0,j.jsxs)("div",{children:[(0,j.jsx)("span",{onClick:function(){t(s)},children:a})," ","- ",(0,j.jsx)("span",{children:r})]})},L=r.memo(F),E=a(5705),H=a(1724),O=a(6670),G=a(3360),$=a(2592),B=a(8979),V="MessagesFormik_sendSwg__TECWd",z={newMessage:""},J=H.Ry({}),q=function(e){var s=e.Msg2SendMessage,a=e.MSG2ScrollBottom;return(0,j.jsx)(j.Fragment,{children:(0,j.jsx)(E.J9,{initialValues:z,validationSchema:J,onSubmit:function(e,t){var r=t.resetForm;s(e.newMessage),r(),a()},children:function(e){e.handleReset;var s=e.values;return(0,j.jsx)(E.l0,{children:(0,j.jsxs)("div",{className:"d-flex d-inline-block justify-content-center align-items-center",children:[(0,j.jsx)("div",{className:"col-9",children:(0,j.jsx)(O.rZ,{label:"",autoFocus:!1,name:"newMessage",type:"text",placeholder:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u0432\u0430\u0448\u0435 \u0441\u043e\u043e\u0431\u0449\u0435\u043d\u0438\u0435",leftLabelLength:""})}),(0,j.jsx)("div",{children:(0,j.jsx)(G.Z,{variant:"light",className:"mx-2",type:"submit",disabled:!s.newMessage,children:(0,j.jsx)($.Z,{src:B.Z,className:V,alt:"\u041e\u0442\u043f\u0440\u0430\u0432\u0438\u0442\u044c \u0441\u043e\u043e\u0431\u0449\u0435\u043d\u0438\u0435",title:"\u041e\u0442\u043f\u0440\u0430\u0432\u0438\u0442\u044c \u0441\u043e\u043e\u0431\u0449\u0435\u043d\u0438\u0435"})})})]})})}})})},Q=r.memo(q),X=function(e){e.Dialog2All;var s=e.userId,a=e.D2Item,t=a&&a.photos&&a.photos.small?a.photos.small:v;return(0,j.jsx)("div",{children:a&&(0,j.jsxs)("div",{children:[(0,j.jsx)("div",{className:k,children:a&&a.userName}),(0,j.jsx)("div",{className:y,children:a&&a.id}),(0,j.jsx)(f.OL,{to:"/profile/"+s,children:(0,j.jsx)("img",{className:P,src:t,alt:"photoSrc"})}),(0,j.jsxs)("div",{className:U,children:["\u0411\u044b\u043b(\u0430): "," ",a&&a.lastUserActivityDate&&a.lastUserActivityDate.slice(0,10)]})]})})},Y=r.memo(X),K=function(e){var s=e.PageWidth,a=e.MobileWidth,t=e.patch,r=e.MessagesNewerThen,i=e.Msg2DeleteMessage,l=e.Msg2SendMessage,o=e.Dialog2All,d=e.userId,n=e.D2Item,c=e.MSG2ScrollBottom;return(0,j.jsxs)("div",{children:["dialog2"===t&&s>a&&(0,j.jsx)("div",{className:"".concat(b," ").concat(w),children:" \u0412\u044b\u0431\u0435\u0440\u0438\u0442\u0435 \u0434\u0438\u0430\u043b\u043e\u0433"}),"messages"===t&&(0,j.jsxs)("div",{children:[(0,j.jsx)("div",{className:"".concat(b," ").concat(A," ").concat(s<a?S:W),children:(0,j.jsx)(Y,{Dialog2All:o,userId:d,D2Item:n})}),(0,j.jsxs)("div",{className:"".concat(b," ").concat(Z," ").concat(s<a?S:W),children:[r.map((function(e){var s=e.id,a=e.body,t=e.addedAt,r=e.senderId,l=e.senderName,o=e.recipientId,d=e.recipientName,n=e.viewed;return(0,j.jsx)(L,{id:s,body:a,Msg2DeleteMessage:i,addedAt:t,senderId:r,senderName:l,recipientId:o,recipientName:d,viewed:n},s)})),(0,j.jsx)("br",{}),(0,j.jsx)("div",{className:"second-block"})," "]}),(0,j.jsx)("div",{className:"".concat(b," ").concat(R," ").concat(s<a?S:W),children:(0,j.jsx)(Q,{Msg2SendMessage:l,MSG2ScrollBottom:c})})]})]})},ee=function(e){var s=e.patch,a=e.PageWidth,t=e.MobileWidth,r=e.Dialog2All,i=e.MessagesNewerThen,l=e.Msg2DeleteMessage,d=e.Msg2SendMessage,n=e.userId,c=e.D2Item,g=e.MSG2ScrollBottom;return(0,j.jsxs)("div",{className:o,children:[(0,j.jsx)(C,{PageWidth:a,MobileWidth:t,patch:s,Dialog2All:r}),(0,j.jsx)(K,{PageWidth:a,MobileWidth:t,patch:s,MessagesNewerThen:i,Msg2DeleteMessage:l,Msg2SendMessage:d,Dialog2All:r,userId:n,D2Item:c,MSG2ScrollBottom:g})]})},se=a(7781),ae=a(1852),te=a(3990),re=l.rP.setD2UserId,ie=l.rP.setMarkers,le=l.rP.setD2Item,oe=l.rP.getDialog2AllAC,de=(0,se.qC)((0,i.$j)((function(e){return{patch:e.app.patch,PageWidth:e.app.PageWidth,MobileWidth:e.app.MobileWidth,Dialog2All:e.dialog2.Dialog2All,MessagesNewerThen:e.dialog2.MessagesNewerThen,d2UserId:e.dialog2.d2UserId,D2Item:e.dialog2.D2Item,Markers:e.dialog2.Markers}}),{putDialog2StartThCr:l.H3,getDialog2AllThCr:l.sz,postDialog2MessageThCr:l.D9,getDialog2MessageIdViewedThCr:l.xX,postDialog2MessageIdToSpamThCr:l.ho,deleteDialog2MessageIdThCr:l.fv,putDialog2MessageIdRestoreThCr:l.HY,getDialog2MessagesNewerThenThCr:l.vu,getDailog2UnreadMessagesThCr:l.mO,setD2UserId:re,setMarkers:ie,setD2Item:le,getDialog2AllAC:oe}),ae.Z,te.Z)((function(e){var s=e.putDialog2StartThCr,a=e.getDialog2AllThCr,i=e.postDialog2MessageThCr,l=(e.getDialog2MessageIdViewedThCr,e.postDialog2MessageIdToSpamThCr,e.deleteDialog2MessageIdThCr),o=(e.putDialog2MessageIdRestoreThCr,e.getDialog2MessagesNewerThenThCr),d=(e.getDailog2UnreadMessagesThCr,e.patch),n=e.PageWidth,c=e.MobileWidth,g=e.Dialog2All,h=e.userId,m=e.MessagesNewerThen,u=(e.setD2UserId,e.d2UserId,e.D2Item),M=e.Markers,x=e.setMarkers,_=e.setD2Item,p=e.getDialog2AllAC,D=(0,r.useCallback)((function(e){l(e,h,"2022-04-30T19:10:31.843")}),[h]);(0,r.useEffect)((function(){u&&u.newMessagesCount>0&&setTimeout((function(){var e=[];g.forEach((function(s){s.id===h&&(s.hasNewMessages=!1,s.newMessagesCount=0),e.push(s)})),console.log("\u0442\u0430\u0439\u043c\u0435\u0440 \u0437\u0430\u043a\u043e\u043d\u0447\u0438\u043b\u0441\u044f"),p(e)}),1e3)}),[u]),(0,r.useEffect)((function(){0===h||M.straightFirstUploaded||(console.log("\u043d\u0430\u0447\u0430\u0442\u044c \u0434\u0438\u0430\u043b\u043e\u0433 \u043f\u043e \u043d\u0435\u043f\u0443\u0441\u0442\u043e\u043c\u0443 userId "),s(h),x((0,t.Z)((0,t.Z)({},M),{},{straightFirstUploaded:!0})))}),[h]),(0,r.useEffect)((function(){if(0!==h){console.log("\u043f\u043e\u043b\u0443\u0447\u0438\u0442\u044c \u0441\u043e\u043e\u0431\u0449\u0435\u043d\u0438\u044f \u043f\u0440\u0438 \u0441\u043c\u0435\u043d\u0435 userId"),o(h,"2022-04-30T19:10:31.843");var e=g.filter((function(e){return e.id===h}))[0];_(e)}}),[h]),(0,r.useEffect)((function(){"dialog2"!==d||M.Dialog2FirstUploaded||(console.log("\u0415\u0434\u0438\u043d\u0438\u0447\u043d\u043e\u0435 \u043f\u043e\u043b\u0443\u0447\u0435\u043d\u0438\u0435 \u0441\u043f\u0438\u0441\u043a\u0430 \u0434\u0438\u0430\u043b\u043e\u0433\u043e\u0432 \u043d\u0430 \u0441\u0442\u0440\u0430\u043d\u0438\u0446\u0435 dialog2"),a(25528,1,10),x((0,t.Z)((0,t.Z)({},M),{},{Dialog2FirstUploaded:!0})))}),[h,d]);var v=document.querySelector(".second-block");return(0,j.jsx)("div",{children:(0,j.jsx)(ee,{patch:d,PageWidth:n,MobileWidth:c,Dialog2All:g,MessagesNewerThen:m,Msg2DeleteMessage:D,Msg2SendMessage:function(e){i(h,e,"2022-04-30T19:10:31.843"),M.dialogId!==h&&(s(h),x((0,t.Z)((0,t.Z)({},M),{},{dialogId:h})))},userId:h,D2Item:u,MSG2ScrollBottom:function(){v&&v.scrollIntoView(!0)}})})}))},6670:function(e,s,a){a.d(s,{$m:function(){return x},rZ:function(){return M}});var t=a(1413),r=a(9439),i=a(5987),l=a(5705),o={errorInputTextArea:"formik1_errorInputTextArea__vpmAv",errorText:"formik1_errorText__eDWui",labelWidth:"formik1_labelWidth__cwal9"},d=(a(7632),a(9410)),n=a(5313),c=a(184),g=["label","children"],h=["label","autoFocus","type","leftLabelLength"],m=["children"],u=function(e){e.label;var s=e.children,a=(0,i.Z)(e,g),t=(0,l.U$)(a.props),d=(0,r.Z)(t,1)[0];return(0,c.jsxs)(c.Fragment,{children:[s," ",d.touched&&d.error&&(0,c.jsx)("div",{className:o.errorText,children:d.error})," "]})},M=function(e){var s=e.label,a=e.autoFocus,g=e.type,m=e.leftLabelLength,M=(0,i.Z)(e,h),x=(0,l.U$)(M),_=(0,r.Z)(x,2),p=_[0],D=_[1];return(0,c.jsxs)(u,{label:s,props:M,children:[" ",(0,c.jsxs)(d.Z,{className:"my-1",size:"sm",children:[" ",m&&(0,c.jsxs)(d.Z.Text,{id:s,className:o.labelWidth,style:{width:m},children:[s,":"]}),(0,c.jsx)(n.Z.Control,(0,t.Z)((0,t.Z)((0,t.Z)({as:"textarea"===g?g:"input",type:"password"===g?g:void 0,className:D.touched&&D.error?o.errorInputTextArea:o.inputTextArea},p),M),{},{autoFocus:a}))]}),(0,c.jsx)("div",{className:o.errorText,children:D.touched&&D.error})]})},x=function(e){var s=e.children,a=(0,i.Z)(e,m),d=(0,l.U$)((0,t.Z)((0,t.Z)({},a),{},{type:"checkbox"})),n=(0,r.Z)(d,2),g=n[0],h=n[1];return(0,c.jsxs)("div",{children:[(0,c.jsxs)("label",{className:"checkbox-input",children:[(0,c.jsx)("input",(0,t.Z)((0,t.Z)({type:"checkbox"},g),a))," ",s]}),h.touched&&h.error&&(0,c.jsx)("div",{className:o.errorText,children:h.error})]})}},3990:function(e,s,a){var t=a(1413),r=(a(2791),a(8687)),i=a(7689),l=a(184),o=function(e){return{isAuth:e.auth.isAuth}};s.Z=function(e){return(0,r.$j)(o,null)((function(s){return s.isAuth?(0,l.jsx)(e,(0,t.Z)({},s)):(0,l.jsx)(i.Fg,{to:"../login"})}))}},1852:function(e,s,a){var t=a(1413),r=(a(2791),a(7689)),i=a(8687),l=a(184);s.Z=function(e){return(0,i.$j)(null,null)((function(s){var a={params:(0,r.UO)()},i=Number(a.params["*"]);return(0,l.jsx)(e,(0,t.Z)((0,t.Z)({},s),{},{userId:i}))}))}}}]);
//# sourceMappingURL=569.515d3adc.chunk.js.map