"use strict";(self.webpackChunkmy_app=self.webpackChunkmy_app||[]).push([[569],{8979:function(e,s,a){a(2791);s.Z=a.p+"static/media/send-svg2.12d8e771d6d27bcd4485de69966afd04.svg"},1569:function(e,s,a){a.r(s),a.d(s,{default:function(){return ue}});var t=a(1413),r=a(2791),i=a(8687),d=a(5870),o="dialog2Messages2COM_dialog2Messages2Common__yrugD",l="dialog2Render_Fixed__yAlTJ",n="dialog2Render_dialog2HeaderCommon__YO-4Y",c="dialog2Render_dialog2ListCommon__ZMqFo",g="dialog2Render_MobileDialogWidth__ahAt-",m="dialog2Render_DesktopDialogWidth__zSxVR",h="dialog2Render_Dialog2ItemCardExt__LODJo",u="dialog2Render_Dialog2ItemCardInt__HQqPI",M="dialog2Render_Dialog2ItemCardName__zSixE",_="dialog2Render_Dialog2ItemCardId__A8R-f",x="dialog2Render_Dialog2ItemCardPhoto__jPmgw",p="dialog2Render_Dialog2ItemCardNewMsgCnt__TrWvv",v="dialog2Render_Dialog2ItemCardMsgTime__2bCd+",I=a(6110),D=a(1087),f=a(184),j=function(e){var s=e.userName,a=e.hasNewMessages,t=e.photos,r=e.lastDialogActivityDate,i=e.newMessagesCount,d=e.id;return(0,f.jsx)("div",{className:h,children:(0,f.jsx)(D.OL,{to:"/messages/"+d,children:(0,f.jsxs)("div",{className:u,children:[(0,f.jsx)("div",{className:M,children:s}),"   ",(0,f.jsx)("div",{className:_,children:d}),"   ",a&&(0,f.jsx)("div",{className:p,children:i})," ",(0,f.jsx)("img",{src:t.small?t.small:I,className:x,alt:"CardPhoto"})," ",(0,f.jsx)("div",{className:v,children:r.slice(11,16)})]})})})},N=r.memo(j),T=function(e){var s=e.PageWidth,a=e.MobileWidth,t=e.patch,r=e.Dialog2All,i=[];return(0,f.jsx)("div",{children:("messages"===t&&s>a||"dialog2"===t)&&(0,f.jsxs)("div",{children:[(0,f.jsx)("div",{className:"".concat(l," ").concat(n," ").concat(s<a?g:m),children:" \u043f\u043e\u0438\u0441\u043a, \u0431\u0435\u0437 \u043a\u043d\u043e\u043f\u043a\u0438 \u043e\u0442\u043f\u0440\u0430\u0432\u0438\u0442\u044c, \u0441 \u0437\u0430\u0434\u0435\u0440\u0436\u043a\u043e\u0439 \u043f\u043e\u0441\u043b\u0435 \u0432\u0432\u043e\u0434\u0430."}),(0,f.jsx)("div",{className:"".concat(l," ").concat(c," ").concat(s<a?g:m),children:r.map((function(e){var s=e.id,a=e.userName,t=e.hasNewMessages,r=e.lastDialogActivityDate,d=e.newMessagesCount,o=e.photos;return i.includes(s)?(0,f.jsx)("div",{}):(i.push(s),(0,f.jsx)(N,{userName:a,hasNewMessages:t,photos:o,lastDialogActivityDate:r,newMessagesCount:d,id:s},s))}))})]})})},C=r.memo(T),b="messages2Render_Fixed__baHQ8",y="messages2Render_messages2NameAndProfileLink__gsVN6",Z="messages2Render_messages2ChooseDialog__JKbif",w="messages2Render_messages2RenderMessages__Ebe0U",A="messages2Render_messages2PrintMessage__dhozP",R="messages2Render_MobileMessagesLeft__6JOQ+",S="messages2Render_DesktopMessagesLeft__rsM5T",W="messages2Render_Msg2HeaderName__Mw++x",k="messages2Render_Msg2Headerid__UXsSw",P="messages2Render_Msg2HeaderPhoto__XGI9W",F="messages2Render_Msg2HeaderActivityDate__ZWTOr",U="messages2Render_myIdNotMyIdMsg2ComExt__oPyxL",E="messages2Render_myIdMessageExt__41EAp",L="messages2Render_NOTmyIdMessageExt__5fs33",O="messages2Render_myIdNotMyIdMsg2ComInt__Estd7",H="messages2Render_myIdMessageInt__xSaFZ",B="messages2Render_NOTmyIdMessageInt__hPt2K",G=function(e){var s=e.id,a=e.body,t=e.Msg2DeleteMessage,r=(e.addedAt,e.senderId),i=(e.senderName,e.recipientId,e.recipientName,e.viewed,e.myId);return console.log("Messages2Item"),(0,f.jsx)("div",{className:"".concat(U," ").concat(i===r?E:L),children:(0,f.jsx)("div",{className:"".concat(O," ").concat(i===r?H:B),onClick:function(){t(s)},children:a})})},$=r.memo(G),V=a(5705),z=a(1724),J=a(6670),q=a(3360),Q=a(2592),X=a(8979),Y="MessagesFormik_sendSwg__TECWd",K={newMessage:""},ee=z.Ry({}),se=function(e){var s=e.Msg2SendMessage;e.MSG2ScrollBottom;return(0,f.jsx)(f.Fragment,{children:(0,f.jsx)(V.J9,{initialValues:K,validationSchema:ee,onSubmit:function(e,a){var t=a.resetForm;s(e.newMessage),t()},children:function(e){e.handleReset;var s=e.values;return(0,f.jsx)(V.l0,{children:(0,f.jsxs)("div",{className:"d-flex d-inline-block justify-content-center align-items-center",children:[(0,f.jsx)("div",{className:"col-9",children:(0,f.jsx)(J.rZ,{label:"",autoFocus:!1,name:"newMessage",type:"text",placeholder:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u0432\u0430\u0448\u0435 \u0441\u043e\u043e\u0431\u0449\u0435\u043d\u0438\u0435",leftLabelLength:""})}),(0,f.jsx)("div",{children:(0,f.jsx)(q.Z,{variant:"light",className:"mx-2",type:"submit",disabled:!s.newMessage,children:(0,f.jsx)(Q.Z,{src:X.Z,className:Y,alt:"\u041e\u0442\u043f\u0440\u0430\u0432\u0438\u0442\u044c \u0441\u043e\u043e\u0431\u0449\u0435\u043d\u0438\u0435",title:"\u041e\u0442\u043f\u0440\u0430\u0432\u0438\u0442\u044c \u0441\u043e\u043e\u0431\u0449\u0435\u043d\u0438\u0435"})})})]})})}})})},ae=r.memo(se),te=function(e){var s=e.userId,a=e.D2Item,t=a&&a.photos&&a.photos.small?a.photos.small:I;return(0,f.jsx)("div",{children:a&&(0,f.jsxs)("div",{children:[(0,f.jsx)("div",{className:W,children:a&&a.userName}),(0,f.jsx)("div",{className:k,children:a&&a.id}),(0,f.jsx)(D.OL,{to:"/profile/"+s,children:(0,f.jsx)("img",{className:P,src:t,alt:"photoSrc"})}),(0,f.jsxs)("div",{className:F,children:["\u0411\u044b\u043b(\u0430): "," ",a&&a.lastUserActivityDate&&a.lastUserActivityDate.slice(0,10)]})]})})},re=r.memo(te),ie=function(e){var s=e.PageWidth,a=e.MobileWidth,t=e.patch,r=e.MessagesNewerThen,i=e.Msg2DeleteMessage,d=e.Msg2SendMessage,o=e.userId,l=e.D2Item,n=e.MSG2ScrollBottom,c=e.myId;return(0,f.jsxs)("div",{children:["dialog2"===t&&s>a&&(0,f.jsx)("div",{className:"".concat(b," ").concat(Z),children:" \u0412\u044b\u0431\u0435\u0440\u0438\u0442\u0435 \u0434\u0438\u0430\u043b\u043e\u0433"}),"messages"===t&&(0,f.jsxs)("div",{children:[(0,f.jsx)("div",{className:"".concat(b," ").concat(y," ").concat(s<a?R:S),children:(0,f.jsx)(re,{userId:o,D2Item:l})}),(0,f.jsxs)("div",{className:"".concat(b," ").concat(w," ").concat(s<a?R:S),children:[r.map((function(e){var s=e.id,a=e.body,t=e.addedAt,r=e.senderId,d=e.senderName,o=e.recipientId,l=e.recipientName,n=e.viewed;return(0,f.jsx)($,{id:s,body:a,Msg2DeleteMessage:i,addedAt:t,senderId:r,senderName:d,recipientId:o,recipientName:l,viewed:n,myId:c},s)})),(0,f.jsx)("div",{className:"second-block"})," "]}),(0,f.jsx)("div",{className:"".concat(b," ").concat(A," ").concat(s<a?R:S),children:(0,f.jsx)(ae,{Msg2SendMessage:d,MSG2ScrollBottom:n})})]})]})},de=function(e){var s=e.patch,a=e.PageWidth,t=e.MobileWidth,r=e.Dialog2All,i=e.MessagesNewerThen,d=e.Msg2DeleteMessage,l=e.Msg2SendMessage,n=e.userId,c=e.D2Item,g=e.MSG2ScrollBottom,m=e.myId;return(0,f.jsxs)("div",{className:o,children:[(0,f.jsx)(C,{PageWidth:a,MobileWidth:t,patch:s,Dialog2All:r}),(0,f.jsx)(ie,{PageWidth:a,MobileWidth:t,patch:s,MessagesNewerThen:i,Msg2DeleteMessage:d,Msg2SendMessage:l,userId:n,D2Item:c,MSG2ScrollBottom:g,myId:m})]})},oe=a(7781),le=a(1852),ne=a(3990),ce=d.rP.setD2UserId,ge=d.rP.setMarkers,me=d.rP.setD2Item,he=d.rP.getDialog2AllAC,ue=(0,oe.qC)((0,i.$j)((function(e){return{patch:e.app.patch,PageWidth:e.app.PageWidth,MobileWidth:e.app.MobileWidth,Dialog2All:e.dialog2.Dialog2All,MessagesNewerThen:e.dialog2.MessagesNewerThen,D2Item:e.dialog2.D2Item,Markers:e.dialog2.Markers,myId:e.auth.myId}}),{putDialog2StartThCr:d.H3,getDialog2AllThCr:d.sz,postDialog2MessageThCr:d.D9,getDialog2MessageIdViewedThCr:d.xX,postDialog2MessageIdToSpamThCr:d.ho,deleteDialog2MessageIdThCr:d.fv,putDialog2MessageIdRestoreThCr:d.HY,getDialog2MessagesNewerThenThCr:d.vu,getDailog2UnreadMessagesThCr:d.mO,setD2UserId:ce,setMarkers:ge,setD2Item:me,getDialog2AllAC:he}),le.Z,ne.Z)((function(e){var s=e.putDialog2StartThCr,a=e.getDialog2AllThCr,i=e.postDialog2MessageThCr,d=(e.getDialog2MessageIdViewedThCr,e.postDialog2MessageIdToSpamThCr,e.deleteDialog2MessageIdThCr),o=(e.putDialog2MessageIdRestoreThCr,e.getDialog2MessagesNewerThenThCr),l=(e.getDailog2UnreadMessagesThCr,e.patch),n=e.PageWidth,c=e.MobileWidth,g=e.Dialog2All,m=e.userId,h=e.MessagesNewerThen,u=(e.setD2UserId,e.D2Item),M=e.Markers,_=e.setMarkers,x=e.setD2Item,p=e.getDialog2AllAC,v=e.myId,I=(0,r.useCallback)((function(e){d(e,m,"2022-04-30T19:10:31.843")}),[m]);(0,r.useEffect)((function(){u&&u.newMessagesCount>0&&setTimeout((function(){var e=[];g.forEach((function(s){s.id===m&&(s.hasNewMessages=!1,s.newMessagesCount=0),e.push(s)})),console.log("\u0442\u0430\u0439\u043c\u0435\u0440 \u0437\u0430\u043a\u043e\u043d\u0447\u0438\u043b\u0441\u044f"),p(e)}),1e3)}),[u]),(0,r.useEffect)((function(){0===m||M.straightFirstUploaded||(console.log("\u043d\u0430\u0447\u0430\u0442\u044c \u0434\u0438\u0430\u043b\u043e\u0433 \u043f\u043e \u043d\u0435\u043f\u0443\u0441\u0442\u043e\u043c\u0443 userId "),s(m),_((0,t.Z)((0,t.Z)({},M),{},{straightFirstUploaded:!0})))}),[m]),(0,r.useEffect)((function(){if(0!==m){console.log("\u043f\u043e\u043b\u0443\u0447\u0438\u0442\u044c \u0441\u043e\u043e\u0431\u0449\u0435\u043d\u0438\u044f \u043f\u0440\u0438 \u0441\u043c\u0435\u043d\u0435 userId"),o(m,"2022-04-30T19:10:31.843");var e=g.filter((function(e){return e.id===m}))[0];x(e)}}),[m]),(0,r.useEffect)((function(){"dialog2"!==l||M.Dialog2FirstUploaded||(console.log("\u0415\u0434\u0438\u043d\u0438\u0447\u043d\u043e\u0435 \u043f\u043e\u043b\u0443\u0447\u0435\u043d\u0438\u0435 \u0441\u043f\u0438\u0441\u043a\u0430 \u0434\u0438\u0430\u043b\u043e\u0433\u043e\u0432 \u043d\u0430 \u0441\u0442\u0440\u0430\u043d\u0438\u0446\u0435 dialog2"),a(25528,1,10),_((0,t.Z)((0,t.Z)({},M),{},{Dialog2FirstUploaded:!0})))}),[m,l]),(0,r.useEffect)((function(){M.needToScrollBottom&&(j(),_((0,t.Z)((0,t.Z)({},M),{},{needToScrollBottom:!1})))}),[M]);var D=document.querySelector(".second-block"),j=function(){D&&D.scrollIntoView(!0)};return(0,f.jsx)("div",{children:(0,f.jsx)(de,{patch:l,PageWidth:n,MobileWidth:c,Dialog2All:g,MessagesNewerThen:h,Msg2DeleteMessage:I,Msg2SendMessage:function(e){i(m,e,"2022-04-30T19:10:31.843",M),M.dialogId!==m&&(s(m),_((0,t.Z)((0,t.Z)({},M),{},{dialogId:m})))},userId:m,D2Item:u,MSG2ScrollBottom:j,myId:v})})}))},6670:function(e,s,a){a.d(s,{$m:function(){return _},rZ:function(){return M}});var t=a(1413),r=a(9439),i=a(5987),d=a(5705),o={errorInputTextArea:"formik1_errorInputTextArea__vpmAv",errorText:"formik1_errorText__eDWui",labelWidth:"formik1_labelWidth__cwal9"},l=(a(7632),a(9410)),n=a(5313),c=a(184),g=["label","children"],m=["label","autoFocus","type","leftLabelLength"],h=["children"],u=function(e){e.label;var s=e.children,a=(0,i.Z)(e,g),t=(0,d.U$)(a.props),l=(0,r.Z)(t,1)[0];return(0,c.jsxs)(c.Fragment,{children:[s," ",l.touched&&l.error&&(0,c.jsx)("div",{className:o.errorText,children:l.error})," "]})},M=function(e){var s=e.label,a=e.autoFocus,g=e.type,h=e.leftLabelLength,M=(0,i.Z)(e,m),_=(0,d.U$)(M),x=(0,r.Z)(_,2),p=x[0],v=x[1];return(0,c.jsxs)(u,{label:s,props:M,children:[" ",(0,c.jsxs)(l.Z,{className:"my-1",size:"sm",children:[" ",h&&(0,c.jsxs)(l.Z.Text,{id:s,className:o.labelWidth,style:{width:h},children:[s,":"]}),(0,c.jsx)(n.Z.Control,(0,t.Z)((0,t.Z)((0,t.Z)({as:"textarea"===g?g:"input",type:"password"===g?g:void 0,className:v.touched&&v.error?o.errorInputTextArea:o.inputTextArea},p),M),{},{autoFocus:a}))]}),(0,c.jsx)("div",{className:o.errorText,children:v.touched&&v.error})]})},_=function(e){var s=e.children,a=(0,i.Z)(e,h),l=(0,d.U$)((0,t.Z)((0,t.Z)({},a),{},{type:"checkbox"})),n=(0,r.Z)(l,2),g=n[0],m=n[1];return(0,c.jsxs)("div",{children:[(0,c.jsxs)("label",{className:"checkbox-input",children:[(0,c.jsx)("input",(0,t.Z)((0,t.Z)({type:"checkbox"},g),a))," ",s]}),m.touched&&m.error&&(0,c.jsx)("div",{className:o.errorText,children:m.error})]})}},3990:function(e,s,a){var t=a(1413),r=(a(2791),a(8687)),i=a(7689),d=a(184),o=function(e){return{isAuth:e.auth.isAuth}};s.Z=function(e){return(0,r.$j)(o,null)((function(s){return s.isAuth?(0,d.jsx)(e,(0,t.Z)({},s)):(0,d.jsx)(i.Fg,{to:"../login"})}))}},1852:function(e,s,a){var t=a(1413),r=(a(2791),a(7689)),i=a(8687),d=a(184);s.Z=function(e){return(0,i.$j)(null,null)((function(s){var a={params:(0,r.UO)()},i=Number(a.params["*"]);return(0,d.jsx)(e,(0,t.Z)((0,t.Z)({},s),{},{userId:i}))}))}}}]);
//# sourceMappingURL=569.6c598857.chunk.js.map