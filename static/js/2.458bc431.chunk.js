"use strict";(self.webpackChunkmy_app=self.webpackChunkmy_app||[]).push([[2],{8979:function(e,s,a){a(2791);s.Z=a.p+"static/media/send-svg2.12d8e771d6d27bcd4485de69966afd04.svg"},9002:function(e,s,a){a.r(s),a.d(s,{default:function(){return Ue}});var t=a(1413),r=a(2791),n=a(8687),d=a(5870),i="dialog2Messages2COM_dialog2Messages2Common__yrugD",o=a(9439),l="dialog2Render_Fixed__yAlTJ",c="dialog2Render_dialog2ListCommon__ZMqFo",g="dialog2Render_MobileDialogWidth__ahAt-",m="dialog2Render_DesktopDialogWidth__zSxVR",h="dialog2Render_Dialog2ItemCardExt__LODJo",u="dialog2Render_Dialog2ItemCardInt__HQqPI",M="dialog2Render_Dialog2ItemCardName__zSixE",_="dialog2Render_Dialog2ItemCardPhoto__jPmgw",x="dialog2Render_Dialog2ItemCardNewMsgCnt__TrWvv",p="dialog2Render_Dialog2ItemCardMsgTime__2bCd+",v="dialog2Render_dialog2HeaderCommon__YO-4Y",f="dialog2Render_Dialog2SearchInput__uF7Sy",j="dialog2Render_MagnifyingGlass__VpERP",D=a(6110),N=a(1087),I=a(5601),y=a(184),R=function(e){var s=e.userName,a=e.hasNewMessages,t=e.photos,r=e.lastDialogActivityDate,n=e.newMessagesCount,d=e.id,i=(0,I.Z)(r);return(0,y.jsx)("div",{className:h,children:(0,y.jsx)(N.OL,{to:"/messages/"+d,children:(0,y.jsxs)("div",{className:u,children:[(0,y.jsx)("div",{className:M,children:s}),"   ",a&&(0,y.jsx)("div",{className:x,children:n})," ",(0,y.jsx)("img",{src:t.small?t.small:D,className:_,alt:"CardPhoto"})," ",(0,y.jsx)("div",{className:p,children:i.isToday?(0,y.jsxs)("span",{children:[" ",i.Hour,":",i.Minutes]}):(0,y.jsxs)("span",{children:[" ",i.Day," ",i.Month," ",i.Year]})})]})})})},T=r.memo(R);var C=a.p+"static/media/magnifying-glass.09322c4362d187ef0b64355ff9c574e8.svg",b=function(e){var s=e.SearchValue,a=e.setSearchValue;return(0,y.jsxs)("div",{children:[(0,y.jsx)("input",{placeholder:"\u041f\u043e\u0438\u0441\u043a",value:s,onChange:function(e){return a(e.target.value)},type:"text",className:f}),(0,y.jsx)("img",{src:C,className:j,alt:"\u041f\u043e\u0438\u0441\u043a"})]})},Z=function(e){var s=e.PageWidth,a=e.MobileWidth,t=e.patch,n=e.Dialog2All,d=(0,r.useState)(""),i=(0,o.Z)(d,2),h=i[0],u=i[1],M=n&&n.filter((function(e){return e.userName.toLowerCase().includes(h.toLowerCase())}));return(0,y.jsx)("div",{children:("messages"===t&&s>a||"dialog2"===t)&&(0,y.jsxs)("div",{children:[(0,y.jsx)("div",{className:"".concat(l," ").concat(v," ").concat(s<a?g:m),children:(0,y.jsx)(b,{SearchValue:h,setSearchValue:u})}),(0,y.jsx)("div",{className:"".concat(l," ").concat(c," ").concat(s<a?g:m),children:M.map((function(e){var s=e.id,a=e.userName,t=e.hasNewMessages,r=e.lastDialogActivityDate,n=e.newMessagesCount,d=e.photos;return(0,y.jsx)(T,{userName:a,hasNewMessages:t,photos:d,lastDialogActivityDate:r,newMessagesCount:n,id:s},s)}))})]})})},A=r.memo(Z),S="messages2Render_Fixed__baHQ8",w="messages2Render_messages2NameAndProfileLink__gsVN6",k="messages2Render_messages2ChooseDialog__JKbif",W="messages2Render_messages2RenderMessages__Ebe0U",P="messages2Render_messages2PrintMessage__dhozP",F="messages2Render_MobileMessagesLeft__6JOQ+",L="messages2Render_DesktopMessagesLeft__rsM5T",E="messages2Render_Msg2HeaderName__Mw++x",H="messages2Render_Msg2HeaderPhoto__XGI9W",U="messages2Render_Msg2HeaderActivityDate__ZWTOr",V="messages2Render_myIdNotMyIdMsg2ComExt__oPyxL",O="messages2Render_myIdMessageExt__41EAp",B="messages2Render_NOTmyIdMessageExt__5fs33",Y="messages2Render_myIdNotMyIdMsg2ComInt__Estd7",z="messages2Render_myIdMessageInt__xSaFZ",q="messages2Render_NOTmyIdMessageInt__hPt2K",$="messages2Render_Msg2DropDownMenuExt__az4N7",J="messages2Render_Msg2DropDownMenuIntCommon__vMw3j",K="messages2Render_Msg2DropDownMenuIntMy__6FgWz",Q="messages2Render_Msg2DropDownMenuIntNotMy__Yf+sf",G="messages2Render_Msg2DropDownItems__Qu0q7",X="messages2Render_positionRelative__ovQvp",ee="messages2Render_DropdownItem__AtL0R",se="messages2Render_imgDelete__qGmmU",ae="messages2Render_imgSpam__tMesr",te="messages2Render_imgRestore__YIG+H",re="messages2Render_Msg2ItemAdedAtCommon__JW5T8",ne="messages2Render_ColorMy__HqHhB",de="messages2Render_ColorNotMy__X-mAo",ie="messages2Render_Msg2DeletedText__lBh9V",oe="messages2Render_Msg2DeletedPic__V5oiT",le="messages2Render_Msg2SpamPic__wTzWN",ce="messages2Render_Msg2Body__dWvTp",ge="messages2Render_Msg2DateExt__3e0xK",me="messages2Render_Msg2DateInt__G4Q4g",he=a(8789);var ue=a.p+"static/media/dust-bin2.85ba7792a26715a7b4844146f0fe8516.svg";var Me=a.p+"static/media/spam1.6b2e03613617d21268ffc89216b86ffe.svg";var _e=a.p+"static/media/restore1.e9dde41c96777233a2e7981f04df1cd9.svg",xe=function(e){var s=e.Msg2DeleteMessage,a=e.id,t=e.isMyMessage,r=e.Msg2MarkAsSpam,n=e.Msg2Restore,d=e.deletedBySender,i=e.isSpam;return(0,y.jsx)(y.Fragment,{children:(0,y.jsx)("div",{children:(0,y.jsxs)(he.Z,{children:[(0,y.jsx)(he.Z.Toggle,{className:"".concat(t?K:Q," \n                         ").concat(J)}),(0,y.jsxs)(he.Z.Menu,{className:G,children:[!d&&(0,y.jsxs)(he.Z.Item,{className:X,eventKey:"1",onClick:function(){s(a)},children:[(0,y.jsx)("div",{className:ee,children:"\u0423\u0434\u0430\u043b\u0438\u0442\u044c \u0443 \u043c\u0435\u043d\u044f"}),(0,y.jsx)("img",{src:ue,className:se,alt:"\u0423\u0434\u0430\u043b\u0438\u0442\u044c \u0443 \u043c\u0435\u043d\u044f"})]}),!t&&!i&&(0,y.jsxs)(he.Z.Item,{className:X,eventKey:"2",onClick:function(){r(a)},children:[(0,y.jsx)("div",{className:ee,children:"\u0412 \u0441\u043f\u0430\u043c"}),(0,y.jsx)("img",{src:Me,className:ae,alt:"\u0412 \u0441\u043f\u0430\u043c"})]}),(d||i)&&(0,y.jsxs)(he.Z.Item,{className:X,eventKey:"3",onClick:function(){n(a)},children:[(0,y.jsx)("div",{className:ee,children:"\u0412\u043e\u0441\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c"}),(0,y.jsx)("img",{src:_e,className:te,alt:"\u0412\u043e\u0441\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c"})]})]})]})})})},pe=function(e){var s=e.id,a=e.body,t=e.Msg2DeleteMessage,n=e.addedAt,d=e.senderId,i=e.myId,l=e.Msg2MarkAsSpam,c=e.Msg2Restore,g=e.deletedBySender,m=e.isSpam,h=e.addedAtPrev,u=(0,I.Z)(n),M=(0,I.Z)(h),_=i===d,x=(0,r.useState)(""),p=(0,o.Z)(x,2),v=p[0],f=p[1];return(0,y.jsxs)("div",{children:["".concat(u.Day,"-").concat(u.Month,"-").concat(u.Year)!=="".concat(M.Day,"-").concat(M.Month,"-").concat(M.Year)&&(0,y.jsx)("div",{className:ge,children:(0,y.jsxs)("div",{className:me,children:[u.Day,".",u.Month,".",u.Year]})}),(0,y.jsx)("div",{className:"".concat(V," ").concat(_?O:B),children:(0,y.jsxs)("div",{className:"".concat(Y," ").concat(_?z:q),onMouseOver:function(){f(s)},onMouseLeave:function(){f("")},children:[g?(0,y.jsxs)("div",{children:[(0,y.jsx)("img",{className:oe,src:ue,alt:""}),(0,y.jsx)("div",{className:ie,children:" \u044d\u0442\u043e \u0441\u043e\u043e\u0431\u0449\u0435\u043d\u0438\u0435 \u0443\u0434\u0430\u043b\u0435\u043d\u043e"})]}):(0,y.jsx)("div",{className:ce,children:a}),(0,y.jsxs)("div",{className:"".concat(re," ").concat(_?ne:de),children:[u.Hour,":",u.Minutes]}),m&&(0,y.jsx)("img",{className:le,src:Me,alt:""}),(0,y.jsx)("div",{className:$,children:v===s&&(0,y.jsx)(xe,{Msg2DeleteMessage:t,id:s,isMyMessage:_,Msg2MarkAsSpam:l,Msg2Restore:c,deletedBySender:g,isSpam:m})})]})})]})},ve=r.memo(pe),fe=a(5705),je=a(1724),De=a(6670),Ne=a(3360),Ie=a(2592),ye=a(8979),Re="Msg2SendMessageRender_sendSwg__etLEs",Te={newMessage:""},Ce=je.Ry({}),be=function(e){var s=e.Msg2SendMessage;return(0,y.jsx)(y.Fragment,{children:(0,y.jsx)(fe.J9,{initialValues:Te,validationSchema:Ce,onSubmit:function(e,a){var t=a.resetForm;s(e.newMessage),t()},children:function(e){e.handleReset;var s=e.values;return(0,y.jsx)(fe.l0,{children:(0,y.jsxs)("div",{className:"d-flex d-inline-block justify-content-center align-items-center",children:[(0,y.jsx)("div",{className:"col-9",children:(0,y.jsx)(De.rZ,{label:"",autoFocus:!1,name:"newMessage",type:"text",placeholder:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u0432\u0430\u0448\u0435 \u0441\u043e\u043e\u0431\u0449\u0435\u043d\u0438\u0435",leftLabelLength:""})}),(0,y.jsx)("div",{children:(0,y.jsx)(Ne.Z,{variant:"light",className:"mx-2",type:"submit",disabled:!s.newMessage,children:(0,y.jsx)(Ie.Z,{src:ye.Z,className:Re,alt:"\u041e\u0442\u043f\u0440\u0430\u0432\u0438\u0442\u044c \u0441\u043e\u043e\u0431\u0449\u0435\u043d\u0438\u0435",title:"\u041e\u0442\u043f\u0440\u0430\u0432\u0438\u0442\u044c \u0441\u043e\u043e\u0431\u0449\u0435\u043d\u0438\u0435"})})})]})})}})})},Ze=r.memo(be),Ae=function(e){var s=e.userId,a=e.D2Item,t=a&&a.photos&&a.photos.small?a.photos.small:D,r=(0,I.Z)(a&&a.lastUserActivityDate);return(0,y.jsx)("div",{children:a&&(0,y.jsxs)("div",{children:[(0,y.jsx)("div",{className:E,children:a&&a.userName}),(0,y.jsx)(N.OL,{to:"/profile/"+s,children:(0,y.jsx)("img",{className:H,src:t,alt:"photoSrc"})}),(0,y.jsxs)("div",{className:U,children:["\u0411\u044b\u043b(\u0430): "," ",a&&r.isToday?(0,y.jsxs)("span",{children:[" \u0441\u0435\u0433\u043e\u0434\u043d\u044f \u0432 ",r.Hour,":",r.Minutes]}):(0,y.jsxs)("span",{children:[" ",r.Day," ",r.Month," ",r.Year]})]})]})})},Se=r.memo(Ae),we=function(e){var s=e.PageWidth,a=e.MobileWidth,t=e.patch,r=e.MessagesNewerThen,n=e.Msg2DeleteMessage,d=e.Msg2SendMessage,i=e.userId,o=e.D2Item,l=e.myId,c=e.Msg2MarkAsSpam,g=e.Msg2Restore;return(0,y.jsxs)("div",{children:["dialog2"===t&&s>a&&(0,y.jsx)("div",{className:"".concat(S," ").concat(k),children:" \u0412\u044b\u0431\u0435\u0440\u0438\u0442\u0435 \u0434\u0438\u0430\u043b\u043e\u0433"}),"messages"===t&&(0,y.jsxs)("div",{children:[(0,y.jsx)("div",{className:"".concat(S," ").concat(w," ").concat(s<a?F:L),children:(0,y.jsx)(Se,{userId:i,D2Item:o})}),(0,y.jsxs)("div",{className:"".concat(S," ").concat(W," ").concat(s<a?F:L),children:[r.map((function(e,s,a){var t=e.id,r=e.body,d=e.addedAt,i=e.senderId,o=e.deletedBySender,m=e.isSpam,h=s>0?a[s-1].addedAt:"";return(0,y.jsx)(ve,{id:t,body:r,Msg2DeleteMessage:n,addedAt:d,senderId:i,myId:l,Msg2MarkAsSpam:c,Msg2Restore:g,deletedBySender:o,isSpam:m,addedAtPrev:h},t)})),(0,y.jsx)("div",{className:"second-block"})]}),(0,y.jsx)("div",{className:"".concat(S," ").concat(P," ").concat(s<a?F:L),children:(0,y.jsx)(Ze,{Msg2SendMessage:d})})]})]})},ke=function(e){var s=e.patch,a=e.PageWidth,t=e.MobileWidth,r=e.Dialog2All,n=e.MessagesNewerThen,d=e.Msg2DeleteMessage,o=e.Msg2SendMessage,l=e.userId,c=e.D2Item,g=e.myId,m=e.Msg2MarkAsSpam,h=e.Msg2Restore;return(0,y.jsxs)("div",{className:i,children:[(0,y.jsx)(A,{PageWidth:a,MobileWidth:t,patch:s,Dialog2All:r}),(0,y.jsx)(we,{PageWidth:a,MobileWidth:t,patch:s,MessagesNewerThen:n,Msg2DeleteMessage:d,Msg2SendMessage:o,userId:l,D2Item:c,myId:g,Msg2MarkAsSpam:m,Msg2Restore:h})]})},We=a(7781),Pe=a(1852),Fe=a(3990),Le=d.rP.setMarkers,Ee=d.rP.setD2Item,He=d.rP.getDialog2AllAC,Ue=(0,We.qC)((0,n.$j)((function(e){return{patch:e.app.patch,PageWidth:e.app.PageWidth,MobileWidth:e.app.MobileWidth,Dialog2All:e.dialog2.Dialog2All,MessagesNewerThen:e.dialog2.MessagesNewerThen,D2Item:e.dialog2.D2Item,Markers:e.dialog2.Markers,myId:e.auth.myId}}),{putDialog2StartThCr:d.H3,getDialog2AllThCr:d.sz,postDialog2MessageThCr:d.D9,getDialog2MessageIdViewedThCr:d.xX,postDialog2MessageIdToSpamThCr:d.ho,deleteDialog2MessageIdThCr:d.fv,putDialog2MessageIdRestoreThCr:d.HY,getDialog2MessagesNewerThenThCr:d.vu,getDailog2UnreadMessagesThCr:d.mO,setMarkers:Le,getDialog2AllAC:He,setD2Item:Ee}),Pe.Z,Fe.Z)((function(e){var s=e.putDialog2StartThCr,a=e.getDialog2AllThCr,n=e.postDialog2MessageThCr,d=(e.getDialog2MessageIdViewedThCr,e.postDialog2MessageIdToSpamThCr),i=e.deleteDialog2MessageIdThCr,o=e.putDialog2MessageIdRestoreThCr,l=e.getDialog2MessagesNewerThenThCr,c=(e.getDailog2UnreadMessagesThCr,e.patch),g=e.PageWidth,m=e.MobileWidth,h=e.Dialog2All,u=e.userId,M=e.MessagesNewerThen,_=e.D2Item,x=e.Markers,p=e.setMarkers,v=e.getDialog2AllAC,f=e.myId,j=e.setD2Item,D=(0,r.useCallback)((function(e){i(e,u,"2022-04-30T19:10:31.843",M)}),[u,M,i]),N=document.querySelector(".second-block"),I=(0,r.useCallback)((function(){N&&N.scrollIntoView(!0)}),[N]);return(0,r.useEffect)((function(){_&&_.newMessagesCount>0&&setTimeout((function(){var e=[];h.forEach((function(s){s.id===u&&(s.hasNewMessages=!1,s.newMessagesCount=0),e.push(s)})),console.log("\u0442\u0430\u0439\u043c\u0435\u0440 \u0437\u0430\u043a\u043e\u043d\u0447\u0438\u043b\u0441\u044f"),v(e)}),1e3)}),[_,h,v,u]),(0,r.useEffect)((function(){0===u||x.straightFirstUploaded||(console.log("\u043d\u0430\u0447\u0430\u0442\u044c \u0434\u0438\u0430\u043b\u043e\u0433 \u043f\u043e \u043d\u0435\u043f\u0443\u0441\u0442\u043e\u043c\u0443 userId "),s(u),p((0,t.Z)((0,t.Z)({},x),{},{straightFirstUploaded:!0})))}),[u,x,s,p]),(0,r.useEffect)((function(){if(0!==u&&(0===M.length||M.length>0&&M[0].senderId!==u&&M[0].recipientId!==u)){console.log("\u043f\u043e\u043b\u0443\u0447\u0438\u0442\u044c \u0441\u043e\u043e\u0431\u0449\u0435\u043d\u0438\u044f \u043f\u0440\u0438 \u0441\u043c\u0435\u043d\u0435 userId",u),l(u,"2022-04-30T19:10:31.843");var e=h.filter((function(e){return e.id===u}))[0];j(e)}}),[u,h,l,j]),(0,r.useEffect)((function(){"dialog2"===c&&!x.Dialog2FirstUploaded&&f&&(console.log("\u0415\u0434\u0438\u043d\u0438\u0447\u043d\u043e\u0435 \u043f\u043e\u043b\u0443\u0447\u0435\u043d\u0438\u0435 \u0441\u043f\u0438\u0441\u043a\u0430 \u0434\u0438\u0430\u043b\u043e\u0433\u043e\u0432 \u043d\u0430 \u0441\u0442\u0440\u0430\u043d\u0438\u0446\u0435 dialog2"),a(f,1,10),p((0,t.Z)((0,t.Z)({},x),{},{Dialog2FirstUploaded:!0})))}),[u,c,x,a,p,f]),(0,r.useEffect)((function(){x.needToScrollBottom&&(I(),p((0,t.Z)((0,t.Z)({},x),{},{needToScrollBottom:!1})))}),[x,I,p]),(0,y.jsx)("div",{children:(0,y.jsx)(ke,{patch:c,PageWidth:g,MobileWidth:m,Dialog2All:h,MessagesNewerThen:M,Msg2DeleteMessage:D,Msg2SendMessage:function(e){n(u,e,"2022-04-30T19:10:31.843",x),x.dialogId!==u&&(s(u),p((0,t.Z)((0,t.Z)({},x),{},{dialogId:u})))},userId:u,D2Item:_,myId:f,Msg2MarkAsSpam:function(e){d(e,M)},Msg2Restore:function(e){o(e,M)}})})}))},6670:function(e,s,a){a.d(s,{$m:function(){return _},rZ:function(){return M}});var t=a(1413),r=a(9439),n=a(5987),d=a(5705),i={errorInputTextArea:"formik1_errorInputTextArea__vpmAv",errorText:"formik1_errorText__eDWui",labelWidth:"formik1_labelWidth__cwal9"},o=(a(7632),a(9410)),l=a(5313),c=a(184),g=["label","children"],m=["label","autoFocus","type","leftLabelLength"],h=["children"],u=function(e){e.label;var s=e.children,a=(0,n.Z)(e,g),t=(0,d.U$)(a.props),o=(0,r.Z)(t,1)[0];return(0,c.jsxs)(c.Fragment,{children:[s," ",o.touched&&o.error&&(0,c.jsx)("div",{className:i.errorText,children:o.error})," "]})},M=function(e){var s=e.label,a=e.autoFocus,g=e.type,h=e.leftLabelLength,M=(0,n.Z)(e,m),_=(0,d.U$)(M),x=(0,r.Z)(_,2),p=x[0],v=x[1];return(0,c.jsxs)(u,{label:s,props:M,children:[" ",(0,c.jsxs)(o.Z,{className:"my-1",size:"sm",children:[" ",h&&(0,c.jsxs)(o.Z.Text,{id:s,className:i.labelWidth,style:{width:h},children:[s,":"]}),(0,c.jsx)(l.Z.Control,(0,t.Z)((0,t.Z)((0,t.Z)({as:"textarea"===g?g:"input",type:"password"===g?g:void 0,className:v.touched&&v.error?i.errorInputTextArea:i.inputTextArea},p),M),{},{autoFocus:a}))]}),(0,c.jsx)("div",{className:i.errorText,children:v.touched&&v.error})]})},_=function(e){var s=e.children,a=(0,n.Z)(e,h),o=(0,d.U$)((0,t.Z)((0,t.Z)({},a),{},{type:"checkbox"})),l=(0,r.Z)(o,2),g=l[0],m=l[1];return(0,c.jsxs)("div",{children:[(0,c.jsxs)("label",{className:"checkbox-input",children:[(0,c.jsx)("input",(0,t.Z)((0,t.Z)({type:"checkbox"},g),a))," ",s]}),m.touched&&m.error&&(0,c.jsx)("div",{className:i.errorText,children:m.error})]})}},3990:function(e,s,a){var t=a(1413),r=(a(2791),a(8687)),n=a(7689),d=a(184),i=function(e){return{isAuth:e.auth.isAuth}};s.Z=function(e){return(0,r.$j)(i,null)((function(s){return s.isAuth?(0,d.jsx)(e,(0,t.Z)({},s)):(0,d.jsx)(n.Fg,{to:"../login"})}))}},1852:function(e,s,a){var t=a(1413),r=(a(2791),a(7689)),n=a(8687),d=a(184);s.Z=function(e){return(0,n.$j)(null,null)((function(s){var a={params:(0,r.UO)()},n=Number(a.params["*"]);return(0,d.jsx)(e,(0,t.Z)((0,t.Z)({},s),{},{userId:n}))}))}}}]);
//# sourceMappingURL=2.458bc431.chunk.js.map