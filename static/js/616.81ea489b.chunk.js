"use strict";(self.webpackChunkmy_app=self.webpackChunkmy_app||[]).push([[616],{1406:function(e,s,a){a.r(s),a.d(s,{default:function(){return Q}});var i=a(8683),t=a(5671),o=a(3144),r=a(136),n=a(7277),l=a(2791),d="Dialogs_dialogs__dM24o",g="Dialogs_dialogList__DRCp9",u="Dialogs_dialogListHeader__LoidE",p="Dialogs_messagesHeader__0aYgL",c="Dialogs_knopka__xT3Jx",h="Dialogs_dialogItemGreed__AaCdb",m="Dialogs_dialog__YZmRT",D="Dialogs_dialogCurrent__ICI5E",f="Dialogs_dialogImg__H5UvS",_="Dialogs_FieldLeft__5h4r2",I="Dialogs_buttonRight__XYfP1",x="Dialogs_FieldButtonGreed__pgs7l",v="Dialogs_dialogContainer__4-aI+",j="Dialogs_x__6nHnv",M=a(1087),C=a.p+"static/media/x.bef5ed280aeab3840a3e.png",T=a(2056),k=a(184),L=function(e){var s=e.deleteDialog,a=e.dialogId,i=e.userPhoto,t=e.userName,o=e.userId,r=e.dialogUserID;return(0,k.jsx)("div",{className:o===r?D:m,children:(0,k.jsxs)("div",{className:h,children:["  ",(0,k.jsx)("div",{children:(0,k.jsxs)(M.OL,{to:"/dialogs/"+o,children:[" ",(0,k.jsx)("div",{className:c,children:(0,k.jsxs)("div",{className:g,children:[(0,k.jsxs)("div",{children:[(0,k.jsx)("img",{src:i,alt:"userPhoto",className:f})," "]}),(0,k.jsxs)("div",{children:[(0,k.jsx)("div",{children:t})," "]})]})})]})}),(0,k.jsx)("div",{children:(0,k.jsx)(T.j,{children:(0,k.jsx)("img",{src:C,alt:"\u0423\u0434\u0430\u043b\u0438\u0442\u044c \u0438\u0437 \u0441\u0432\u043e\u0435\u0433\u043e \u0434\u0438\u0430\u043b\u043e\u0433\u041b\u0438\u0441\u0442\u0430",className:j,onMouseOver:function(){},onClick:function(){s(a,o)},title:"\u0423\u0434\u0430\u043b\u0438\u0442\u044c \u0438\u0437 \u0441\u0432\u043e\u0435\u0433\u043e \u0434\u0438\u0430\u043b\u043e\u0433\u041b\u0438\u0441\u0442\u0430"})})})]})})},y="Message_timeStyle__nW8fG",U="Message_x__9QsEg",N="Message_messageswrapper__KRV1p",Z="Message_messageMyId__w6TOo",P="Message_messageNotMyId__wjpf9",w=function(e){var s=e.message,a=e.myID,i=e.userId,t=e.Date,o=e.MessageId,r=e.deleteMessage;return(0,k.jsxs)("div",{className:N,children:[" ",(0,k.jsxs)("div",{className:a===i?Z:P,children:[" ",(0,k.jsx)("span",{children:s}),(0,k.jsx)("img",{src:C,className:U,onMouseOver:function(){},onClick:function(){r(o)},alt:"\u0423\u0434\u0430\u043b\u0438\u0442\u044c \u0441\u043e\u043e\u0431\u0449\u0435\u043d\u0438\u0435 \u0443 \u0432\u0441\u0435\u0445",title:"\u0423\u0434\u0430\u043b\u0438\u0442\u044c \u0441\u043e\u043e\u0431\u0449\u0435\u043d\u0438\u0435 \u0443 \u0432\u0441\u0435\u0445"}),(0,k.jsxs)("span",{className:y,children:[t.Hour,":",t.Minutes]})]})]})},b=a(6139),F=a(704),E=a(2381),A=a(6528),H=a(8111),S=a(1083),B=a(6110),R=(0,F.Z)({form:"newMessageForm"})((function(e){var s=e.handleSubmit;return(0,k.jsx)("form",{onSubmit:s,children:(0,k.jsxs)("div",{className:x,children:[(0,k.jsx)("div",{className:_,children:(0,k.jsx)(b.Z,{name:"newMessageData",component:A.II,validate:[(0,H.DT)(100)],placeholder:"newMessage"})}),(0,k.jsx)("div",{className:I,children:(0,k.jsx)("button",{type:"submit",children:"Submit"})})]})})})),O=function(e){var s=e.deleteDialog,a=e.dialogUserID,i=e.getDialogList,t=e.dialogs2,o=e.messages2,r=e.dispatch,n=e.sendMessage,g=e.getDialogLastUpdateTime,c=e.myID,h=e.deleteMessage,m=t.map((function(e){var i=e.userPhoto?e.userPhoto:B;return(0,k.jsx)(L,{userName:e.userName,userId:e.userId,userPhoto:i,dialogUserID:a,deleteDialog:s,dialogId:e.dialogId},e.userId)})),D=o.map((function(e){return(0,k.jsx)(w,{message:e.message,myID:c,userId:e.userId,Date:e.Date,MessageId:e.id,deleteMessage:h},e.id+e.message)}));return(0,l.useEffect)((function(){var e=setInterval((function(){g(),i()}),1e3);return function(){clearInterval(e)}}),[g,i]),(0,k.jsxs)("div",{className:d,children:[(0,k.jsxs)("div",{children:[(0,k.jsx)("h3",{className:u,children:"dialogList"}),(0,k.jsxs)("div",{className:v,children:[(0,k.jsx)(S.Z,{child:m,height:window.screen.availHeight-277,firstInsideContainer:"DialogsUp",secondInsideContainer:"DialogsDown",containerElement:"DialogsContainer123"})," "]})]}),(0,k.jsxs)("div",{children:[(0,k.jsx)("h3",{className:p,children:"Messages"}),(0,k.jsx)(S.Z,{child:D,height:window.screen.availHeight-300,firstInsideContainer:"MessagesUp",secondInsideContainer:"MessagesDown",containerElement:"MessagesContainer"})," ",(0,k.jsxs)("div",{children:[(0,k.jsx)(R,{onSubmit:function(e){r((0,E.mc)("newMessageForm")),n(e.newMessageData)}})," "]})]})]})},G=a(2807),Y=a(8687),q=a(7781),X=a(8859),$=a(3990),J=a(1852),K=function(e){(0,r.Z)(a,e);var s=(0,n.Z)(a);function a(){var e;(0,t.Z)(this,a);for(var i=arguments.length,o=new Array(i),r=0;r<i;r++)o[r]=arguments[r];return(e=s.call.apply(s,[this].concat(o))).commonPartMountUpdate=function(){e.props.userId?e.props.dialogUserID!==e.props.userId&&(e.props.setdialogUserID(e.props.userId),e.props.getProfileThunkCreator(e.props.userId,!0,e.props.myID)):e.props.messages2.length>0&&(e.props.setMessages([]),e.props.setdialogUserID(null))},e.getDialogs=function(){""!==e.props.userId&&e.props.getDialogsThunkCreator(e.props.myID,e.props.userId)},e.getDialogLastUpdateTime=function(){""!==e.props.userId&&e.props.getDialogLastUpdateTimeTnkCrt(e.props.myID,e.props.userId)},e.getDialogList=function(){e.props.getMyDialogListThunkCreator(e.props.myID)},e.sendMessage=function(s){var a=0,i=0;null!==e.props.profilePage&&(a=e.props.profilePage.profile.fullName,i=e.props.profilePage.profile.photos.small),e.props.userId?(e.props.sendDialogsThunkCreator(s,e.props.auth.myID,e.props.auth.myLogin,e.props.auth.myProfile.photos.small,e.props.userId),e.props.updateDialogListThunkCreator(e.props.auth.myID,e.props.userId,a,i)):alert("\u0412\u044b\u0431\u0435\u0440\u0438\u0442\u0435 \u0434\u0438\u0430\u043b\u043e\u0433")},e.deleteMessage=function(s){e.props.deleteMessageThunkCreator(s,e.props.myID,e.props.userId)},e.deleteDialog=function(s,a){e.props.deleteDialogThunkCreator(s,e.props.myID,a)},e}return(0,o.Z)(a,[{key:"componentDidMount",value:function(){this.getDialogList(),this.commonPartMountUpdate()}},{key:"componentDidUpdate",value:function(e,s,a){this.commonPartMountUpdate(),this.props.dialogLastUpdateTime!==e.dialogLastUpdateTime&&this.getDialogs()}},{key:"render",value:function(){return(0,k.jsx)("div",{children:(0,k.jsx)(O,(0,i.Z)((0,i.Z)({messages2:this.props.messages2,dialogs:this.props.dialogs,dialogs2:this.props.dialogs2},this.props),{},{sendMessage:this.sendMessage,getDialogs:this.getDialogs,getDialogLastUpdateTime:this.getDialogLastUpdateTime,myID:this.props.myID,deleteMessage:this.deleteMessage,getDialogList:this.getDialogList,dialogUserID:this.props.dialogUserID,deleteDialog:this.deleteDialog}))})}}]),a}(l.Component),Q=(0,q.qC)((0,Y.$j)((function(e){return{isAuth:e.auth.isAuth,myID:e.auth.myID,dialogUserID:e.dialogsPage.dialogUserID,messages2:e.dialogsPage.messages2,dialogs:e.dialogsPage.dialogs,dialogLastUpdateTime:e.dialogsPage.dialogLastUpdateTime,dialogs2:e.dialogsPage.dialogs2,profilePage:e.profilePage,auth:e.auth}}),(function(e){return{sendDialogsThunkCreator:function(s,a,i,t,o){e((0,G.nB)(s,a,i,t,o))},getDialogsThunkCreator:function(s,a){e((0,G.kp)(s,a))},setdialogUserID:function(s){e((0,G.Pg)(s))},setMessages:function(s){e((0,G.Z)(s))},getDialogLastUpdateTimeTnkCrt:function(s,a){e((0,G.kB)(s,a))},deleteMessageThunkCreator:function(s,a,i){e((0,G.EF)(s,a,i))},getProfileThunkCreator:function(s,a,i){e((0,X.aI)(s,a,i))},getFollowThunkCreator:function(s){e((0,G.fB)(s))},getMyDialogListThunkCreator:function(s){e((0,G.l)(s))},updateDialogListThunkCreator:function(s,a,i,t){e((0,G.wB)(s,a,i,t))},deleteDialogThunkCreator:function(s,a,i){e((0,G.LZ)(s,a,i))},dispatch:e}})),J.Z,$.Z)(K)},6528:function(e,s,a){a.d(s,{II:function(){return h},gx:function(){return c}});var i=a(8683),t=a(5987),o=(a(2791),"customFields_textAreaError__R-r1L"),r="customFields_textArea__DhXBS",n="customFields_textError__koMT7",l="customFields_Input__lhbLD",d="customFields_InputError__9Zp9E",g=a(184),u=["input","meta"],p=["input","meta"],c=function(e){var s=e.input,a=e.meta,l=(0,t.Z)(e,u),d=a.touched&&a.error;return(0,g.jsxs)("div",{children:[(0,g.jsx)("div",{children:(0,g.jsx)("textarea",(0,i.Z)((0,i.Z)({},s),{},{placeholder:l.placeholder,className:d?o:r}))}),(0,g.jsx)("div",{children:d&&(0,g.jsx)("span",{className:n,children:a.error})})]})},h=function(e){var s=e.input,a=e.meta,o=(0,t.Z)(e,p),r=a.touched&&a.error;return(0,g.jsxs)("span",{children:[(0,g.jsx)("span",{children:(0,g.jsx)("input",(0,i.Z)((0,i.Z)({},s),{},{placeholder:o.placeholder,className:r?d:l}))}),(0,g.jsx)("div",{children:r&&(0,g.jsx)("span",{className:n,children:a.error})})]})}},8111:function(e,s,a){a.d(s,{DT:function(){return t},Do:function(){return o},aH:function(){return i}});var i=function(e){return e?void 0:"Field is required"},t=function(e){return function(s){return s&&s.length>e?"MaxLength is ".concat(e):void 0}},o=function(e){return e&&!/^[A-Z0-9._%+-]+@[A-Z0-9.-]+\.[A-Z]{2,4}$/i.test(e)?"Invalid email address":void 0}}}]);
//# sourceMappingURL=616.81ea489b.chunk.js.map